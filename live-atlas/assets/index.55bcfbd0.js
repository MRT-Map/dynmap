var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o,i=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&r(e,a,t[a]);if(o)for(var a of o(t))s.call(t,a)&&r(e,a,t[a]);return e},l=(e,o)=>t(e,a(o));import{l as c,c as d,d as p,a as m,w as h,o as u,r as g,b as y,e as w,f as v,F as _,g as f,h as E,i as b,j as S,t as L,n as k,k as T,m as A,p as C,q as x,s as P,u as M,v as I,x as z,y as U,z as R,A as O,B as N,C as D,D as H,E as B,G as $,H as j,I as Z,V as W}from"./vendor.8071b1a5.js";class G extends Error{constructor(e){super(e),this.name="ChatError"}}const F=/ยง[0-9a-f]/gi,q=/_?nether(_|$)/i,V=/(^|_)end(_|$)/i;function K(e){return{version:e.dynmapversion||"",grayHiddenPlayers:e.grayplayerswhenhidden||!1,defaultMap:e.defaultmap||void 0,defaultWorld:e.defaultworld||void 0,defaultZoom:e.defaultzoom||0,followMap:e.followmap||void 0,followZoom:e.followzoom||0,updateInterval:e.updaterate||3e3,showLayerControl:e.showlayercontrol&&"false"!==e.showlayercontrol,title:e.title.replace(F,"")||"Dynmap",loginEnabled:e["login-enabled"]||!1,maxPlayers:e.maxcount||0,expandUI:e.sidebaropened&&"false"!==e.sidebaropened,hash:e.confighash||0}}function Y(e){return{chatPlayerJoin:e.joinmessage||"",chatPlayerQuit:e.quitmessage||"",chatAnonymousJoin:e["msg-hiddennamejoin"]||"",chatAnonymousQuit:e["msg-hiddennamequit"]||"",chatErrorNotAllowed:e["msg-chatnotallowed"]||"",chatErrorRequiresLogin:e["msg-chatrequireslogin"]||"",chatErrorCooldown:e.spammessage||"",worldsHeading:e["msg-maptypes"]||"",playersHeading:e["msg-players"]||""}}function Q(e){const t=new Map;return(e.worlds||[]).forEach((e=>{let a="overworld";q.test(e.name)||"DIM-1"==e.name?a="nether":(V.test(e.name)||"DIM1"==e.name)&&(a="end"),t.set(e.name,{seaLevel:e.sealevel||64,name:e.name,dimension:a,protected:e.protected||!1,title:e.title||"",height:e.height||256,center:{x:e.center.x||0,y:e.center.y||0,z:e.center.z||0},maps:new Map})})),(e.worlds||[]).forEach((e=>{(e.maps||[]).forEach((a=>{const o=a.append_to_world||e.name,n=t.get(o);n?n.maps.set(a.name,{world:e,background:a.background||"#000000",backgroundDay:a.backgroundday||"#000000",backgroundNight:a.backgroundnight||"#000000",icon:a.icon||void 0,imageFormat:a["image-format"]||"png",name:a.name||"(Unnamed map)",nightAndDay:a.nightandday||!1,prefix:a.prefix||"",protected:a.protected||!1,title:a.title||"",mapToWorld:a.maptoworld||[0,0,0,0,0,0,0,0,0],worldToMap:a.worldtomap||[0,0,0,0,0,0,0,0,0],nativeZoomLevels:a.mapzoomout||1,extraZoomLevels:a.mapzoomin||0}):console.warn(`Ignoring map '${a.name}' associated with non-existent world '${o}'`)}))})),Array.from(t.values())}function J(e){const t={markers:{showLabels:!1},chatBox:void 0,chatBalloons:!1,playerMarkers:void 0,coordinatesControl:void 0,linkControl:!1,clockControl:void 0,logoControls:[]};return(e.components||[]).forEach((a=>{switch(a.type||"unknown"){case"markers":t.markers={showLabels:a.showlabel||!1};break;case"playermarkers":t.playerMarkers={hideByDefault:a.hidebydefault||!1,layerName:a.label||"Players",layerPriority:a.layerprio||0,showBodies:a.showplayerbody||!1,showSkinFaces:a.showplayerfaces||!1,showHealth:a.showplayerhealth||!1,smallFaces:a.smallplayerfaces||!1};break;case"coord":t.coordinatesControl={showY:!a.hidey,label:a.label||"Location: ",showRegion:a["show-mcr"]||!1,showChunk:a["show-chunk"]||!1};break;case"link":t.linkControl=!0;break;case"digitalclock":t.clockControl={showDigitalClock:!0,showWeather:!1,showTimeOfDay:!1};break;case"timeofdayclock":t.clockControl={showTimeOfDay:!0,showDigitalClock:a.showdigitalclock||!1,showWeather:a.showweather||!1};break;case"logo":t.logoControls.push({text:a.text||"",url:a.linkurl||void 0,position:a.position.replace("-","")||"topleft",image:a.logourl||void 0});break;case"chat":e.allowwebchat&&(t.chatSending={loginRequired:e["webchat-requires-login"]||!1,maxLength:e.chatlengthlimit||256,cooldown:e["webchat-interval"]||5});break;case"chatbox":t.chatBox={allowUrlName:a.allowurlname||!1,showPlayerFaces:a.showplayerfaces||!1,messageLifetime:a.messagettl||1/0,messageHistory:a.scrollback||1/0};break;case"chatballoon":t.chatBalloons=!0}})),t}function X(e,t){return{id:e,label:t.label||"Unnamed set",hidden:t.hide||!1,priority:t.layerprio||0,showLabels:t.showlabels||void 0,minZoom:void 0!==t.minzoom&&t.minzoom>-1?t.minzoom:void 0,maxZoom:void 0!==t.maxzoom&&t.maxzoom>-1?t.maxzoom:void 0}}function ee(e){const t=Object.freeze(new Map);for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.set(a,te(e[a]));return t}function te(e){return{label:e.label||"",location:{x:e.x||0,y:e.y||0,z:e.z||0},dimensions:e.dim?e.dim.split("x"):[16,16],icon:e.icon||"default",isHTML:e.markup||!1,minZoom:void 0!==e.minzoom&&e.minzoom>-1?e.minzoom:void 0,maxZoom:void 0!==e.maxzoom&&e.maxzoom>-1?e.maxzoom:void 0,popupContent:e.desc||void 0}}function ae(e){const t=Object.freeze(new Map);for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.set(a,oe(e[a]));return t}function oe(e){return{style:{color:e.color||"#ff0000",opacity:e.opacity||1,weight:e.weight||1,fillColor:e.fillcolor||"#ff0000",fillOpacity:e.fillopacity||0},label:e.label||"",isHTML:e.markup||!1,x:e.x||[0,0],y:[e.ybottom||0,e.ytop||0],z:e.z||[0,0],minZoom:void 0!==e.minzoom&&e.minzoom>-1?e.minzoom:void 0,maxZoom:void 0!==e.maxzoom&&e.maxzoom>-1?e.maxzoom:void 0,popupContent:e.desc||void 0}}function ne(e){const t=Object.freeze(new Map);for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.set(a,se(e[a]));return t}function se(e){return{x:e.x||[0,0],y:e.y||[0,0],z:e.z||[0,0],style:{color:e.color||"#ff0000",opacity:e.opacity||1,weight:e.weight||1},label:e.label||"",isHTML:e.markup||!1,minZoom:void 0!==e.minzoom&&e.minzoom>-1?e.minzoom:void 0,maxZoom:void 0!==e.maxzoom&&e.maxzoom>-1?e.maxzoom:void 0,popupContent:e.desc||void 0}}function re(e){const t=Object.freeze(new Map);for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.set(a,ie(e[a]));return t}function ie(e){return{location:{x:e.x||0,y:e.y||0,z:e.z||0},radius:[e.xr||0,e.zr||0],style:{fillColor:e.fillcolor||"#ff0000",fillOpacity:e.fillopacity||0,color:e.color||"#ff0000",opacity:e.opacity||1,weight:e.weight||1},label:e.label||"",isHTML:e.markup||!1,minZoom:void 0!==e.minzoom&&e.minzoom>-1?e.minzoom:void 0,maxZoom:void 0!==e.maxzoom&&e.maxzoom>-1?e.maxzoom:void 0,popupContent:e.desc||void 0}}function le(e){const t={markerSets:new Map,tiles:[],chat:[]},a={stale:0,noSet:0,noId:0,unknownType:0,unknownCType:0,incomplete:0,notImplemented:0},o=De().state.updateTimestamp;let n=0;for(const s of e)switch(s.type){case"component":{if(o&&s.timestamp<o){a.stale++;continue}if(!s.id){a.noId++;continue}const e=s.msg.startsWith("set")?s.id:s.set;if(!e){a.noSet++;continue}if("markers"!==s.ctype){a.unknownCType++;continue}t.markerSets.has(e)||t.markerSets.set(e,{areaUpdates:[],markerUpdates:[],lineUpdates:[],circleUpdates:[],removed:!1});const r=t.markerSets.get(e),i={id:s.id,removed:s.msg.endsWith("deleted")};s.msg.startsWith("set")?(r.removed=i.removed,r.payload=i.removed?void 0:X(e,s)):s.msg.startsWith("marker")?(i.payload=i.removed?void 0:te(s),r.markerUpdates.push(Object.freeze(i))):s.msg.startsWith("area")?(i.payload=i.removed?void 0:oe(s),r.areaUpdates.push(Object.freeze(i))):s.msg.startsWith("circle")?(i.payload=i.removed?void 0:ie(s),r.circleUpdates.push(Object.freeze(i))):s.msg.startsWith("line")&&(i.payload=i.removed?void 0:se(s),r.lineUpdates.push(Object.freeze(i))),n++;break}case"chat":if(!s.message||!s.timestamp){a.incomplete++;continue}if(s.timestamp<o){a.stale++;continue}if("player"!==s.source&&"web"!==s.source){a.notImplemented++;continue}t.chat.push({type:"chat",source:s.source||void 0,playerAccount:s.account||void 0,playerName:s.playerName||void 0,message:s.message||"",timestamp:s.timestamp,channel:s.channel||void 0});break;case"playerjoin":if(!s.account||!s.timestamp){a.incomplete++;continue}if(s.timestamp<o){a.stale++;continue}t.chat.push({type:"playerjoin",playerAccount:s.account,playerName:s.playerName||"",timestamp:s.timestamp||void 0});break;case"playerquit":if(!s.account||!s.timestamp){a.incomplete++;continue}if(s.timestamp<o){a.stale++;continue}t.chat.push({type:"playerleave",playerAccount:s.account,playerName:s.playerName||"",timestamp:s.timestamp||void 0});break;case"tile":if(!s.name||!s.timestamp){a.incomplete++;continue}if(o&&s.timestamp<o){a.stale++;continue}t.tiles.push({name:s.name,timestamp:s.timestamp}),n++;break;default:a.unknownType++}return t.chat=t.chat.sort(((e,t)=>t.timestamp-e.timestamp)),console.debug(`Updates: ${n} accepted. Rejected: `,a),t}async function ce(e,t){let a,o;try{a=await fetch(e,{signal:t})}catch(n){if(n instanceof DOMException&&"AbortError"===n.name)throw console.warn(`Request aborted (${e}`),n;throw console.error(n),new Error("Network request failed")}if(!a.ok)throw new Error(`Network request failed (${a.statusText||"Unknown"})`);try{o=await a.json()}catch(n){throw n instanceof DOMException&&"AbortError"===n.name?(console.warn(`Request aborted (${e}`),n):new Error("Request returned invalid json")}return o}let de,pe,me;var he={async getConfiguration(){de&&de.abort(),de=new AbortController;const e=await ce(De().getters.serverConfig.dynmap.configuration,de.signal);if("login-required"===e.error)throw new Error("Login required");if(e.error)throw new Error(e.error);return{config:K(e),messages:Y(e),worlds:Q(e),components:J(e),loggedIn:e.loggedin||!1}},async getUpdate(e,t,a){let o=De().getters.serverConfig.dynmap.update;o=o.replace("{world}",t),o=o.replace("{timestamp}",a.toString()),me&&me.abort(),me=new AbortController;const n=await ce(o,me.signal),s=new Set;return(n.players||[]).forEach((e=>{const t=e.world&&"-some-other-bogus-world-"!==e.world?e.world:void 0;s.add({account:e.account||"",health:e.health||0,armor:e.armor||0,name:e.name||"",sort:e.sort||0,hidden:!t,location:{x:isNaN(e.x)?0:e.x+.5,y:isNaN(e.y)?0:e.y,z:isNaN(e.z)?0:e.z+.5,world:t}})})),{worldState:{timeOfDay:n.servertime||0,thundering:n.isThundering||!1,raining:n.hasStorm||!1},playerCount:n.count||0,configHash:n.confighash||0,timestamp:n.timestamp||0,players:s,updates:le(n.updates||[])}},async getMarkerSets(e){const t=`${De().getters.serverConfig.dynmap.markers}_markers_/marker_${e}.json`;pe&&pe.abort(),pe=new AbortController;const a=await ce(t,pe.signal),o=new Map;a.sets=a.sets||{};for(const n in a.sets){if(!Object.prototype.hasOwnProperty.call(a.sets,n))continue;const e=a.sets[n],t=ee(e.markers||{}),s=re(e.circles||{}),r=ae(e.areas||{}),c=ne(e.lines||{});o.set(n,l(i({},X(n,e)),{markers:t,circles:s,areas:r,lines:c}))}return o},sendChatMessage(e){const t=De();return t.state.components.chatSending?fetch(De().getters.serverConfig.dynmap.sendmessage,{method:"POST",body:JSON.stringify({name:null,message:e})}).then((e=>{if(403===e.status)throw new G(t.state.messages.chatErrorCooldown.replace("%interval%",t.state.components.chatSending.cooldown.toString()));if(!e.ok)throw new Error("Network request failed");return e.json()})).then((e=>{if("none"!==e.error)throw new G(t.state.messages.chatErrorNotAllowed)})).catch((e=>{throw e instanceof G||(console.error(t.state.messages.chatErrorUnknown),console.trace(e)),e})):Promise.reject(t.state.messages.chatErrorDisabled)}};const ue=new Map,ge=new Map,ye=new Set,we=[],ve=e=>{const t=e>=0&&e<13700;return{serverTime:e,days:Math.floor((e+8e3)/24e3),hours:(Math.floor(e/1e3)+6)%24,minutes:Math.floor(e/1e3%1*60),seconds:Math.floor(e/1e3%1*60%1*60),day:t,night:!t}},_e=(e,t)=>{const a="string"==typeof e?e:e.account,o=`${a}-${t}`;if(ue.has(o))return Promise.resolve(ue.get(o));if(ge.has(o))return ge.get(o);const n=new Promise(((e,n)=>{const s=new Image;s.onload=function(){ue.set(o,s),ye.delete(o),fe(),e(s)},s.onerror=function(e){console.warn(`Failed to retrieve face of ${a} with size ${t}!`),ye.delete(o),fe(),n(e)},we.push({account:a,size:t,cacheKey:o,image:s})})).finally((()=>ge.delete(o)));return ge.set(o,n),fe(),n},fe=()=>{if(ye.size>8||!we.length)return;const e=we.pop(),t="body"===e.size?`faces/body/${e.account}.png`:`faces/${e.size}x${e.size}/${e.account}.png`;ye.add(e.cacheKey),e.image.src=Ee(De().getters.serverConfig.dynmap.markers,t),fe()},Ee=(e,t)=>e.indexOf("?")>=0?e+escape(t):e+t,be=()=>{const e=De().state.currentProjection;return(t,a,o)=>e.locationToLatLng({x:t,y:a,z:o})},Se=()=>{const e=new URLSearchParams(window.location.search),t=window.location.hash.replace("#","");if(t)try{return Le(t)}catch(a){console.warn("Ignoring invalid url "+a)}try{return ke(e)}catch(a){console.warn("Ignoring invalid legacy url "+a)}return null},Le=e=>{const t=e.replace("#","").split(";"),a=t[0]||void 0,o=t[1]||void 0,n=(t[2]||"").split(",").map((e=>parseFloat(e))).filter((e=>!isNaN(e)&&isFinite(e))),s=void 0!==t[3]?parseInt(t[3]):void 0;if(n.length&&3!==n.length)throw new TypeError("Location should contain exactly 3 valid numbers");if(void 0!==s&&(isNaN(s)||s<0||!isFinite(s)))throw new TypeError("Invalid value for zoom");return{world:a,map:o,location:n.length?{x:n[0],y:n[1],z:n[2]}:void 0,zoom:s,legacy:!1}},ke=e=>{const t=e.get("worldname")||void 0,a=e.get("mapname")||void 0,o=[e.get("x")||"",e.get("y")||"",e.get("z")||""].map((e=>parseFloat(e))).filter((e=>!isNaN(e)&&isFinite(e))),n=e.has("zoom")?parseInt(e.get("zoom")):void 0;if(o.length&&3!==o.length)throw new TypeError("Location should contain exactly 3 valid numbers");if(void 0!==n&&(isNaN(n)||n<0||!isFinite(n)))throw new TypeError("Invalid value for zoom");return{world:t,map:a,location:o.length?{x:o[0],y:o[1],z:o[2]}:void 0,zoom:n,legacy:!0}},Te=()=>{if(!De().state.currentServer)throw new RangeError("No current server");return he},Ae=(e,t,a,o)=>{const n=`${Math.round(a.x)},${Math.round(a.y)},${Math.round(a.z)}`;return e&&t?`#${e.name};${t.name};${n};${o}`:""},Ce=e=>{const t=document.querySelector(e);t&&t.focus()},xe={playerMarkersEnabled:e=>void 0!==e.components.playerMarkers,coordinatesControlEnabled:e=>void 0!==e.components.coordinatesControl,clockControlEnabled:e=>void 0!==e.components.clockControl,night:e=>ve(e.currentWorldState.timeOfDay).night,mapBackground:e=>e.currentMap?e.currentMap.nightAndDay?ve(e.currentWorldState.timeOfDay).night?e.currentMap.backgroundNight||e.currentMap.background||"transparent":e.currentMap.backgroundDay||e.currentMap.background||"transparent":e.currentMap.background||"transparent":"transparent",url(e){const t=e.currentLocation.x,a=e.currentLocation.y,o=e.currentLocation.z,n=e.currentZoom;return e.currentWorld&&e.currentMap?Ae(e.currentWorld,e.currentMap,{x:t,y:a,z:o},n):""},serverConfig(e){if(!e.currentServer)throw RangeError("No current server");return e.currentServer}};var Pe,Me;(Me=Pe||(Pe={})).INIT="init",Me.SET_SERVER_CONFIGURATION="setServerConfiguration",Me.SET_SERVER_CONFIGURATION_HASH="setServerConfigurationHash",Me.CLEAR_SERVER_CONFIGURATION_HASH="clearServerConfigurationHash",Me.SET_SERVER_MESSAGES="setServerMessages",Me.SET_WORLDS="setWorlds",Me.CLEAR_WORLDS="clearWorlds",Me.SET_COMPONENTS="setComponents",Me.SET_MARKER_SETS="setMarkerSets",Me.CLEAR_MARKER_SETS="clearMarkerSets",Me.ADD_WORLD="addWorld",Me.SET_WORLD_STATE="setWorldState",Me.SET_UPDATE_TIMESTAMP="setUpdateTimestamp",Me.ADD_MARKER_SET_UPDATES="addMarkerSetUpdates",Me.ADD_TILE_UPDATES="addTileUpdates",Me.ADD_CHAT="addChat",Me.POP_MARKER_UPDATES="popMarkerUpdates",Me.POP_AREA_UPDATES="popAreaUpdates",Me.POP_CIRCLE_UPDATES="popCircleUpdates",Me.POP_LINE_UPDATES="popLineUpdates",Me.POP_TILE_UPDATES="popTileUpdates",Me.INCREMENT_REQUEST_ID="incrementRequestId",Me.SET_PLAYERS_ASYNC="setPlayersAsync",Me.CLEAR_PLAYERS="clearPlayers",Me.SYNC_PLAYERS="syncPlayers",Me.SET_CURRENT_SERVER="setCurrentServer",Me.SET_CURRENT_MAP="setCurrentMap",Me.SET_CURRENT_PROJECTION="setCurrentProjection",Me.SET_CURRENT_LOCATION="setCurrentLocation",Me.SET_CURRENT_ZOOM="setCurrentZoom",Me.SET_PARSED_URL="setParsedUrl",Me.CLEAR_PARSED_URL="clearParsedUrl",Me.CLEAR_CURRENT_MAP="clearCurrentMap",Me.SET_FOLLOW_TARGET="setFollowTarget",Me.SET_PAN_TARGET="setPanTarget",Me.CLEAR_FOLLOW_TARGET="clearFollow",Me.CLEAR_PAN_TARGET="clearPanTarget",Me.SET_SMALL_SCREEN="setSmallScreen",Me.TOGGLE_UI_ELEMENT_VISIBILITY="toggleUIElementVisibility",Me.SET_UI_ELEMENT_VISIBILITY="setUIElementVisibility",Me.TOGGLE_SIDEBAR_SECTION_COLLAPSED_STATE="toggleSidebarSectionCollapsedState",Me.SET_SIDEBAR_SECTION_COLLAPSED_STATE="setSidebarSectionCollapsedState",Me.SET_LOGGED_IN="setLoggedIn";const Ie={[Pe.INIT](e,t){const a=localStorage.getItem("collapsedSections"),o=(null==t?void 0:t.messages)||{},n=(null==t?void 0:t.ui)||{};a&&(e.ui.sidebar.collapsedSections=new Set(JSON.parse(a)));const s={chatTitle:o.chatTitle||"",chatLogin:o.chatLogin||"",chatLoginLink:o.chatLoginLink||"",chatNoMessages:o.chatNoMessages||"",chatSend:o.chatSend||"",chatPlaceholder:o.chatPlaceholder||"",chatErrorDisabled:o.chatErrorDisabled||"",chatErrorUnknown:o.chatErrorUnknown||"",serversHeading:o.serversHeading||"",worldsSkeleton:o.worldsSkeleton||"",playersSkeleton:o.playersSkeleton||"",playersTitle:o.playersTitle||"",playersTitleHidden:o.playersTitleHidden||"",playersTitleOtherWorld:o.playersTitleOtherWorld||"",playersSearchPlaceholder:o.playersSearchPlaceholder||"",playersSearchSkeleton:o.playersSearchSkeleton||"",followingHeading:o.followingHeading||"",followingHidden:o.followingHidden||"",followingUnfollow:o.followingUnfollow||"",followingTitleUnfollow:o.followingTitleUnfollow||"",linkTitle:o.linkTitle||"",loadingTitle:o.loadingTitle||"",locationRegion:o.locationRegion||"",locationChunk:o.locationChunk||"",contextMenuCopyLink:o.contextMenuCopyLink||"",contextMenuCenterHere:o.contextMenuCenterHere||"",toggleTitle:o.toggleTitle||"",mapTitle:o.mapTitle||"",layersTitle:o.layersTitle||"",copyToClipboardSuccess:o.copyToClipboardSuccess||"",copyToClipboardError:o.copyToClipboardError||""};e.messages=Object.assign(e.messages,s),"boolean"==typeof n.playersAboveMarkers&&(e.ui.playersAboveMarkers=n.playersAboveMarkers),"boolean"==typeof n.playersSearch&&(e.ui.playersSearch=n.playersSearch),e.servers=t.servers,e.currentServer&&!e.servers.has(e.currentServer.id)&&(e.currentServer=void 0)},[Pe.SET_SERVER_CONFIGURATION](e,t){e.configuration=Object.assign(e.configuration,t),e.configurationHash=t.hash},[Pe.SET_SERVER_CONFIGURATION_HASH](e,t){e.configurationHash=t},[Pe.CLEAR_SERVER_CONFIGURATION_HASH](e){e.configurationHash=void 0},[Pe.SET_SERVER_MESSAGES](e,t){e.messages=Object.assign(e.messages,t)},[Pe.SET_WORLDS](e,t){e.worlds.clear(),e.maps.clear(),e.followTarget=void 0,e.panTarget=void 0,e.currentWorldState.timeOfDay=0,e.currentWorldState.raining=!1,e.currentWorldState.thundering=!1,t.forEach((t=>{e.worlds.set(t.name,t),t.maps.forEach((a=>e.maps.set([t.name,a.name].join("_"),a)))})),e.currentWorld&&e.worlds.has(e.currentWorld.name)?e.currentWorld=e.worlds.get(e.currentWorld.name):e.currentWorld=void 0,e.currentWorld&&e.currentMap&&e.maps.has([e.currentWorld.name,e.currentMap.name].join("_"))?e.currentMap=e.maps.get([e.currentWorld.name,e.currentMap.name].join("_")):e.currentMap=void 0},[Pe.CLEAR_WORLDS](e){e.worlds.clear(),e.maps.clear(),e.followTarget=void 0,e.panTarget=void 0,e.currentWorldState.timeOfDay=0,e.currentWorldState.raining=!1,e.currentWorldState.thundering=!1},[Pe.SET_COMPONENTS](e,t){e.components=Object.assign(e.components,t)},[Pe.SET_MARKER_SETS](e,t){e.markerSets.clear(),e.pendingSetUpdates.clear();for(const a of t)e.markerSets.set(a[0],a[1]),e.pendingSetUpdates.set(a[0],{markerUpdates:[],areaUpdates:[],circleUpdates:[],lineUpdates:[]})},[Pe.CLEAR_MARKER_SETS](e){e.markerSets.clear(),e.pendingSetUpdates.clear()},[Pe.ADD_WORLD](e,t){e.worlds.set(t.name,t)},[Pe.SET_WORLD_STATE](e,t){e.currentWorldState=Object.assign(e.currentWorldState,t)},[Pe.SET_UPDATE_TIMESTAMP](e,t){e.updateTimestamp=t},[Pe.ADD_MARKER_SET_UPDATES](e,t){for(const a of t){if(!e.markerSets.has(a[0])){if(!a[1].payload){console.warn(`ADD_MARKER_SET_UPDATES: Marker set ${a[0]} doesn't exist`);continue}e.markerSets.set(a[0],{id:a[0],showLabels:a[1].payload.showLabels,minZoom:a[1].payload.minZoom,maxZoom:a[1].payload.maxZoom,priority:a[1].payload.priority,label:a[1].payload.label,hidden:a[1].payload.hidden,markers:Object.freeze(new Map),areas:Object.freeze(new Map),circles:Object.freeze(new Map),lines:Object.freeze(new Map)}),e.pendingSetUpdates.set(a[0],{markerUpdates:[],areaUpdates:[],circleUpdates:[],lineUpdates:[]})}const t=e.markerSets.get(a[0]),o=e.pendingSetUpdates.get(a[0]);if(a[1].removed)e.markerSets.delete(a[0]),e.pendingSetUpdates.delete(a[0]);else{a[1].payload&&(t.showLabels=a[1].payload.showLabels,t.minZoom=a[1].payload.minZoom,t.maxZoom=a[1].payload.maxZoom,t.priority=a[1].payload.priority,t.label=a[1].payload.label,t.hidden=a[1].payload.hidden);for(const e of a[1].markerUpdates)e.removed?t.markers.delete(e.id):t.markers.set(e.id,e.payload);for(const e of a[1].areaUpdates)e.removed?t.areas.delete(e.id):t.areas.set(e.id,e.payload);for(const e of a[1].circleUpdates)e.removed?t.circles.delete(e.id):t.circles.set(e.id,e.payload);for(const e of a[1].lineUpdates)e.removed?t.lines.delete(e.id):t.lines.set(e.id,e.payload);o.markerUpdates=o.markerUpdates.concat(a[1].markerUpdates),o.areaUpdates=o.areaUpdates.concat(a[1].areaUpdates),o.circleUpdates=o.circleUpdates.concat(a[1].circleUpdates),o.lineUpdates=o.lineUpdates.concat(a[1].lineUpdates)}}},[Pe.ADD_TILE_UPDATES](e,t){e.pendingTileUpdates=e.pendingTileUpdates.concat(t)},[Pe.ADD_CHAT](e,t){e.chat.messages.unshift(...t)},[Pe.POP_MARKER_UPDATES](e,{markerSet:t,amount:a}){e.markerSets.has(t)?e.pendingSetUpdates.get(t).markerUpdates.splice(0,a):console.warn(`POP_MARKER_UPDATES: Marker set ${t} doesn't exist`)},[Pe.POP_AREA_UPDATES](e,{markerSet:t,amount:a}){e.markerSets.has(t)?e.pendingSetUpdates.get(t).areaUpdates.splice(0,a):console.warn(`POP_AREA_UPDATES: Marker set ${t} doesn't exist`)},[Pe.POP_CIRCLE_UPDATES](e,{markerSet:t,amount:a}){e.markerSets.has(t)?e.pendingSetUpdates.get(t).circleUpdates.splice(0,a):console.warn(`POP_CIRCLE_UPDATES: Marker set ${t} doesn't exist`)},[Pe.POP_LINE_UPDATES](e,{markerSet:t,amount:a}){e.markerSets.has(t)?e.pendingSetUpdates.get(t).lineUpdates.splice(0,a):console.warn(`POP_LINE_UPDATES: Marker set ${t} doesn't exist`)},[Pe.POP_TILE_UPDATES](e,t){e.pendingTileUpdates.splice(0,t)},[Pe.INCREMENT_REQUEST_ID](e){e.updateRequestId++},[Pe.SET_PLAYERS_ASYNC](e,t){let a=0;for(const o of t){if(e.players.has(o.account)){const t=e.players.get(o.account);t.health=o.health,t.armor=o.armor,t.location=Object.assign(t.location,o.location),t.hidden=o.hidden,t.name=o.name,t.sort=o.sort,t.name===o.name&&t.sort===o.sort||(e.sortedPlayers.dirty=!0)}else e.sortedPlayers.dirty=!0,e.players.set(o.account,{account:o.account,health:o.health,armor:o.armor,location:o.location,name:o.name,sort:o.sort,hidden:o.hidden});if(t.delete(o),++a>=10)break}return!t.size&&e.sortedPlayers.dirty&&(e.sortedPlayers=[...e.players.values()].sort(((e,t)=>e.sort!==t.sort?e.sort-t.sort:e.account.toLowerCase().localeCompare(t.account.toLowerCase())))),t},[Pe.SYNC_PLAYERS](e,t){for(const[a,o]of e.players)t.has(o.account)||(e.sortedPlayers.splice(e.sortedPlayers.indexOf(o),1),e.players.delete(a))},[Pe.CLEAR_PLAYERS](e){e.followTarget=void 0,e.panTarget=void 0,e.players.clear(),e.sortedPlayers.splice(0,e.sortedPlayers.length)},[Pe.SET_CURRENT_SERVER](e,t){if(!e.servers.has(t))throw new RangeError(`Unknown server ${t}`);e.currentServer=e.servers.get(t)},[Pe.SET_CURRENT_MAP](e,{worldName:t,mapName:a}){if(a=[t,a].join("_"),!e.worlds.has(t))throw new RangeError(`Unknown world ${t}`);if(!e.maps.has(a))throw new RangeError(`Unknown map ${a}`);const o=e.worlds.get(t);e.currentWorld!==o&&(e.currentWorld=e.worlds.get(t),e.markerSets.clear(),e.pendingSetUpdates.clear(),e.pendingTileUpdates=[]),e.currentMap=e.maps.get(a)},[Pe.SET_CURRENT_PROJECTION](e,t){e.currentProjection=t},[Pe.SET_CURRENT_LOCATION](e,t){e.currentLocation=t},[Pe.SET_CURRENT_ZOOM](e,t){e.currentZoom=t},[Pe.SET_PARSED_URL](e,t){e.parsedUrl=t},[Pe.CLEAR_CURRENT_MAP](e){e.markerSets.clear(),e.pendingSetUpdates.clear(),e.pendingTileUpdates=[],e.currentWorld=void 0,e.currentMap=void 0},[Pe.CLEAR_PARSED_URL](e){e.parsedUrl=void 0},[Pe.SET_FOLLOW_TARGET](e,t){e.followTarget=t},[Pe.SET_PAN_TARGET](e,t){e.panTarget=t},[Pe.CLEAR_FOLLOW_TARGET](e){e.followTarget=void 0},[Pe.CLEAR_PAN_TARGET](e){e.panTarget=void 0},[Pe.SET_SMALL_SCREEN](e,t){!e.ui.smallScreen&&t&&e.ui.visibleElements.size>1&&e.ui.visibleElements.clear(),e.ui.smallScreen=t},[Pe.TOGGLE_UI_ELEMENT_VISIBILITY](e,t){const a=!e.ui.visibleElements.has(t);a&&e.ui.smallScreen&&e.ui.visibleElements.clear(),e.ui.previouslyVisibleElements.add(t),a?e.ui.visibleElements.add(t):e.ui.visibleElements.delete(t)},[Pe.SET_UI_ELEMENT_VISIBILITY](e,t){t.state&&e.ui.smallScreen&&e.ui.visibleElements.clear(),(t.state||e.ui.visibleElements.has(t.element))&&e.ui.previouslyVisibleElements.add(t.element),t.state?e.ui.visibleElements.add(t.element):e.ui.visibleElements.delete(t.element)},[Pe.TOGGLE_SIDEBAR_SECTION_COLLAPSED_STATE](e,t){e.ui.sidebar.collapsedSections.has(t)?e.ui.sidebar.collapsedSections.delete(t):e.ui.sidebar.collapsedSections.add(t)},[Pe.SET_SIDEBAR_SECTION_COLLAPSED_STATE](e,t){t.state?e.ui.sidebar.collapsedSections.delete(t.section):e.ui.sidebar.collapsedSections.add(t.section)},[Pe.SET_LOGGED_IN](e,t){e.loggedIn=t}};class ze extends c.exports.Class{constructor(e){super(),c.exports.Util.setOptions(this,e)}locationToLatLng(e){const t=this.options.worldToMap,a=t[3]*e.x+t[4]*e.y+t[5]*e.z,o=t[0]*e.x+t[1]*e.y+t[2]*e.z;return new c.exports.LatLng(-(128-a)/(1<<this.options.nativeZoomLevels),o/(1<<this.options.nativeZoomLevels))}latLngToLocation(e,t){const a=this.options.mapToWorld,o=e.lng*(1<<this.options.nativeZoomLevels),n=128+e.lat*(1<<this.options.nativeZoomLevels);return{x:a[0]*o+a[1]*n+a[2]*t,y:t,z:a[6]*o+a[7]*n+a[8]*t}}}const Ue={version:"1.3.2",servers:new Map,configuration:{version:"",defaultMap:"",defaultWorld:"",defaultZoom:0,followMap:"",followZoom:0,updateInterval:3e3,showLayerControl:!1,title:"",loginEnabled:!1,maxPlayers:0,grayHiddenPlayers:!1,expandUI:!1,hash:0},configurationHash:void 0,messages:{chatPlayerJoin:"",chatPlayerQuit:"",chatAnonymousJoin:"",chatAnonymousQuit:"",chatNoMessages:"",chatTitle:"",chatLogin:"",chatLoginLink:"",chatSend:"",chatPlaceholder:"",chatErrorNotAllowed:"",chatErrorRequiresLogin:"",chatErrorCooldown:"",chatErrorDisabled:"",chatErrorUnknown:"",serversHeading:"",worldsHeading:"",worldsSkeleton:"",playersSkeleton:"",playersHeading:"",playersTitle:"",playersTitleHidden:"",playersTitleOtherWorld:"",playersSearchPlaceholder:"",playersSearchSkeleton:"",followingHeading:"",followingUnfollow:"",followingTitleUnfollow:"",followingHidden:"",linkTitle:"",loadingTitle:"",locationRegion:"",locationChunk:"",contextMenuCopyLink:"",contextMenuCenterHere:"",toggleTitle:"",mapTitle:"",layersTitle:"",copyToClipboardSuccess:"",copyToClipboardError:""},loggedIn:!1,worlds:new Map,maps:new Map,players:new Map,sortedPlayers:[],chat:{unread:0,messages:[]},markerSets:new Map,pendingSetUpdates:new Map,pendingTileUpdates:[],components:{markers:{showLabels:!1},playerMarkers:void 0,coordinatesControl:void 0,clockControl:void 0,linkControl:!1,logoControls:[],chatSending:void 0,chatBox:void 0,chatBalloons:!1},followTarget:void 0,panTarget:void 0,currentServer:void 0,currentWorld:void 0,currentMap:void 0,currentLocation:{x:0,y:0,z:0},currentZoom:0,currentProjection:new ze({mapToWorld:[0,0,0,0,0,0,0,0,0],worldToMap:[0,0,0,0,0,0,0,0,0],nativeZoomLevels:1}),currentWorldState:{raining:!1,thundering:!1,timeOfDay:0},updateRequestId:0,updateTimestamp:new Date,ui:{playersAboveMarkers:!0,playersSearch:!0,smallScreen:!1,visibleElements:new Set,previouslyVisibleElements:new Set,sidebar:{collapsedSections:new Set}}};var Re,Oe;(Oe=Re||(Re={})).LOAD_CONFIGURATION="loadConfiguration",Oe.GET_UPDATE="getUpdate",Oe.GET_MARKER_SETS="getMarkerSets",Oe.SET_PLAYERS="setPlayers",Oe.POP_MARKER_UPDATES="popMarkerUpdates",Oe.POP_AREA_UPDATES="popAreaUpdates",Oe.POP_CIRCLE_UPDATES="popCircleUpdates",Oe.POP_LINE_UPDATES="popLineUpdates",Oe.POP_TILE_UPDATES="popTileUpdates",Oe.SEND_CHAT_MESSAGE="sendChatMessage";const Ne=d({state:Ue,mutations:Ie,getters:xe,actions:{async[Re.LOAD_CONFIGURATION]({commit:e,state:t}){var a,o;e(Pe.CLEAR_SERVER_CONFIGURATION_HASH,void 0);const n=await Te().getConfiguration();if(e(Pe.SET_SERVER_CONFIGURATION,n.config),e(Pe.SET_SERVER_MESSAGES,n.messages),e(Pe.SET_WORLDS,n.worlds),e(Pe.SET_COMPONENTS,n.components),e(Pe.SET_LOGGED_IN,n.loggedIn),t.currentMap)return n;let s,r;if(t.ui.visibleElements.size||!t.configuration.expandUI||t.ui.smallScreen||(e(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"players",state:!0}),e(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"maps",state:!0})),n.config.defaultWorld&&t.worlds.has(n.config.defaultWorld)&&(s=n.config.defaultWorld),(null==(a=t.parsedUrl)?void 0:a.world)&&t.worlds.has(t.parsedUrl.world)&&(s=t.parsedUrl.world),s||(s=t.worlds.size?t.worlds.entries().next().value[1].name:void 0),s){const e=t.worlds.get(s);n.config.defaultMap&&e.maps.has(n.config.defaultMap)&&(r=n.config.defaultMap),(null==(o=t.parsedUrl)?void 0:o.map)&&e.maps.has(t.parsedUrl.map)&&(r=t.parsedUrl.map),r||(r=e.maps.size?e.maps.entries().next().value[1].name:void 0)}return s&&r&&e(Pe.SET_CURRENT_MAP,{worldName:s,mapName:r}),n},async[Re.GET_UPDATE]({commit:e,dispatch:t,state:a}){if(!a.currentWorld)return Promise.reject("No current world");const o=await Te().getUpdate(a.updateRequestId,a.currentWorld.name,a.updateTimestamp.valueOf());return e(Pe.SET_WORLD_STATE,o.worldState),e(Pe.SET_UPDATE_TIMESTAMP,new Date(o.timestamp)),e(Pe.INCREMENT_REQUEST_ID,void 0),e(Pe.ADD_MARKER_SET_UPDATES,o.updates.markerSets),e(Pe.ADD_TILE_UPDATES,o.updates.tiles),e(Pe.ADD_CHAT,o.updates.chat),e(Pe.SET_SERVER_CONFIGURATION_HASH,o.configHash),await t(Re.SET_PLAYERS,o.players),o},[Re.SET_PLAYERS]({commit:e,state:t},a){const o=new Set;for(const s of a)o.add(s.account);e(Pe.SYNC_PLAYERS,o);const n=(t,a)=>{e(Pe.SET_PLAYERS_ASYNC,t),t.size?requestAnimationFrame((()=>n(t,a))):a()};return new Promise((e=>{requestAnimationFrame((()=>n(a,e)))}))},async[Re.GET_MARKER_SETS]({commit:e,state:t}){if(!t.currentWorld)throw new Error("No current world");const a=await Te().getMarkerSets(t.currentWorld.name);return e(Pe.SET_MARKER_SETS,a),a},async[Re.POP_MARKER_UPDATES]({commit:e,state:t},{markerSet:a,amount:o}){if(!t.markerSets.has(a))return console.warn(`POP_MARKER_UPDATES: Marker set ${a} doesn't exist`),[];const n=t.pendingSetUpdates.get(a).markerUpdates.slice(0,o);return e(Pe.POP_MARKER_UPDATES,{markerSet:a,amount:o}),n},async[Re.POP_AREA_UPDATES]({commit:e,state:t},{markerSet:a,amount:o}){if(!t.markerSets.has(a))return console.warn(`POP_AREA_UPDATES: Marker set ${a} doesn't exist`),[];const n=t.pendingSetUpdates.get(a).areaUpdates.slice(0,o);return e(Pe.POP_AREA_UPDATES,{markerSet:a,amount:o}),n},async[Re.POP_CIRCLE_UPDATES]({commit:e,state:t},{markerSet:a,amount:o}){if(!t.markerSets.has(a))return console.warn(`POP_CIRCLE_UPDATES: Marker set ${a} doesn't exist`),[];const n=t.pendingSetUpdates.get(a).circleUpdates.slice(0,o);return e(Pe.POP_CIRCLE_UPDATES,{markerSet:a,amount:o}),n},async[Re.POP_LINE_UPDATES]({commit:e,state:t},{markerSet:a,amount:o}){if(!t.markerSets.has(a))return console.warn(`POP_LINE_UPDATES: Marker set ${a} doesn't exist`),[];const n=t.pendingSetUpdates.get(a).lineUpdates.slice(0,o);return e(Pe.POP_LINE_UPDATES,{markerSet:a,amount:o}),n},async[Re.POP_TILE_UPDATES]({commit:e,state:t},a){const o=t.pendingTileUpdates.slice(0,a);return e(Pe.POP_TILE_UPDATES,a),o},async[Re.SEND_CHAT_MESSAGE]({commit:e,state:t},a){await Te().sendChatMessage(a)}}});function De(){return Ne}class He extends c.exports.TileLayer{constructor(e){if(super("",e),this._mapSettings=e.mapSettings,e.maxZoom=this._mapSettings.nativeZoomLevels+this._mapSettings.extraZoomLevels,e.maxNativeZoom=this._mapSettings.nativeZoomLevels,e.zoomReverse=!0,e.tileSize=128,e.minZoom=0,c.exports.Util.setOptions(this,e),null===e.mapSettings)throw new TypeError("mapSettings missing");this._projection=new ze({mapToWorld:this._mapSettings.mapToWorld,worldToMap:this._mapSettings.worldToMap,nativeZoomLevels:this._mapSettings.nativeZoomLevels}),this._cachedTileUrls=Object.seal(new Map),this._namedTiles=Object.seal(new Map),this._loadQueue=[],this._loadingTiles=Object.seal(new Set),this._tileTemplate=c.exports.DomUtil.create("img","leaflet-tile"),this._tileTemplate.style.width=this._tileTemplate.style.height=this.options.tileSize+"px",this._tileTemplate.alt="",this._tileTemplate.tileName="",this._tileTemplate.setAttribute("role","presentation"),Object.seal(this._tileTemplate),(this.options.crossOrigin||""===this.options.crossOrigin)&&(this._tileTemplate.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin)}getTileName(e){const t=this.getTileInfo(e);return t.y=-t.y,t.scaledy=t.y>>5,`${t.prefix}${t.nightday}/${t.scaledx}_${t.scaledy}/${t.zoom}${t.x}_${t.y}.${t.fmt}`}getTileUrl(e){return this.getTileUrlFromName(this.getTileName(e))}getTileUrlFromName(e,t){let a=this._cachedTileUrls.get(e);if(!a){const o=escape(`${this._mapSettings.world.name}/${e}`);a=`${Ne.getters.serverConfig.dynmap.tiles}${o}`,void 0!==t&&(a+=-1===a.indexOf("?")?`?timestamp=${t}`:`&timestamp=${t}`),this._cachedTileUrls.set(e,a)}return a}updateNamedTile(e,t){const a=this._namedTiles.get(e);this._cachedTileUrls.delete(e),a&&(a.dataset.src=this.getTileUrlFromName(e,t),this._loadQueue.push(a),this._tickLoadQueue())}createTile(e,t){const a=this._tileTemplate.cloneNode(!1);return a.tileName=this.getTileName(e),a.dataset.src=this.getTileUrl(e),this._namedTiles.set(a.tileName,a),this._loadQueue.push(a),a.onload=()=>{this._tileOnLoad(t,a),this._loadingTiles.delete(a),this._tickLoadQueue()},a.onerror=()=>{this._tileOnError(t,a,{name:"Error",message:"Error"}),this._loadingTiles.delete(a),this._tickLoadQueue()},this._tickLoadQueue(),a}_tickLoadQueue(){if(this._loadingTiles.size>6)return;const e=this._loadQueue.shift();e&&(this._loadingTiles.add(e),e.src=e.dataset.src)}_abortLoading(){let e;for(const t in this._tiles)Object.prototype.hasOwnProperty.call(this._tiles,t)&&(e=this._tiles[t],e.coords.z!==this._tileZoom&&(e.loaded&&e.el&&e.el.tileName&&this._namedTiles.delete(e.el.tileName),this._loadQueue.includes(e.el)&&this._loadQueue.splice(this._loadQueue.indexOf(e.el),1),this._loadingTiles.delete(e.el)));super._abortLoading.call(this)}_removeTile(e){const t=this._tiles[e];if(!t)return;const a=t.el.tileName;a&&(this._namedTiles.delete(a),this._cachedTileUrls.delete(a),this._loadingTiles.delete(t.el),this._loadQueue.includes(t.el)&&this._loadQueue.splice(this._loadQueue.indexOf(t.el),1),t.el.onerror=null,t.el.onload=null),super._removeTile.call(this,e)}zoomprefix(e){return"z".repeat(e)+(0===e?"":"_")}getTileInfo(e){const t=this._getZoomForUrl(),a=Math.max(0,t-this._mapSettings.extraZoomLevels),o=1<<a,n=o*e.x,s=o*e.y;return{prefix:this._mapSettings.prefix,nightday:this._mapSettings.nightAndDay&&!this.options.night?"_day":"",scaledx:n>>5,scaledy:s>>5,zoom:this.zoomprefix(a),zoomprefix:0==a?"":this.zoomprefix(a)+"_",x:n,y:s,fmt:this._mapSettings.imageFormat||"png"}}getProjection(){return this._projection}setNight(e){this.options.night!==e&&(this.options.night=e,this.redraw())}}var Be=p({props:{name:{type:String,required:!0},map:{type:Object,required:!0},leaflet:{type:Object,required:!0}},setup(e){let t,a=0;const o=De(),n=m((()=>ve(o.state.currentWorldState.timeOfDay).night)),s=new He({errorTileUrl:"images/blank.png",mapSettings:Object.freeze(JSON.parse(JSON.stringify(e.map))),night:n.value}),r=m((()=>!!o.state.pendingTileUpdates.length)),i=m((()=>e.map===o.state.currentMap)),l=()=>{De().commit(Pe.SET_CURRENT_PROJECTION,s.getProjection()),e.leaflet.addLayer(s),t=h(r,((e,t)=>{!e||t||a||d()}))},c=()=>{s.remove(),t&&t()},d=async()=>{const e=await De().dispatch(Re.POP_TILE_UPDATES,10);for(const t of e)s.updateNamedTile(t.name,t.timestamp);a=r.value?requestAnimationFrame((()=>d())):0};h(i,(e=>e?l():c())),h(n,(t=>{e.map.nightAndDay&&s.setNight(t)})),i.value&&l(),u((()=>{c(),a&&cancelAnimationFrame(a)}))},render:()=>null}),$e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABGdBTUEAALGOfPtRkwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6AAAdTAAAOpgAAA6lwAAF2+XqZnUAAABVklEQVR4nGLUV+D9zwAEf/4xgAELIxOY/vn3D5j+8+cvmGZigoizsjCD6f//IeoBAggiSgEACCAWmM0w8Oc/RICbgw1M87Mxgum/DBCb3375CeH/h7gMIIAodgFAALHAGN3Z8WCanRViMycHH5j+/vUTRAEzxK73L56B6Y71O8A0QABR7AKAAGJcVZsGDk8udnawwLefED8yM0P47z+9B9Py4mJg+uGDWygGAAQQxS4ACCAWmM3e1ZPAdLBdF5hOtruHYvP0LeJgeu2hXjC9ui4dTAMEEMUuAAggxjnJbuAwEJeQgTiJXQBMb963D0VhiIcNmH7y6DaYvvfyLZgGCCCKXQAQQCxffkNS1K8nED+vPnQGTHtqG6IobJ+1CEx72RhAnM7ACqYBAohiFwAEEMv95y/BjH//UDPFjotnwTQzKwuK+JfvEBf//P0LTAMEEMUuAAgwAHDmWQWwT04UAAAAAElFTkSuQmCC";const je=document.createElement("img");je.height=16,je.width=16;const Ze=document.createElement("img");Ze.height=16,Ze.width=16;const We=document.createElement("img");We.height=32,We.width=32;const Ge=document.createElement("img");Ge.height=32,Ge.width=32,je.src=Ze.src=We.src=Ge.src=$e,je.className=Ze.className=We.className=Ge.className="player__icon";class Fe extends c.exports.DivIcon{constructor(e,t){super(t),this._player=e}createIcon(e){e&&c.exports.DomUtil.remove(e);const t=this._player;let a=8;if(this._container=document.createElement("div"),this._container.classList.add("marker","marker--player","leaflet-marker-icon"),this._playerInfo=document.createElement("div"),this._playerInfo.className="marker__label",this._playerName=document.createElement("span"),this._playerName.className="player__name",this._playerName.innerHTML=this._currentName=t.name,this.options.showSkinFace){let e;this.options.smallFace?(this._playerImage=Ze.cloneNode(),e="16",a=8):this.options.showBody?(this._playerImage=Ge.cloneNode(),e="body",a=16):(this._playerImage=We.cloneNode(),e="32",a=16),_e(t,e).then((e=>{this._playerImage.src=e.src})).catch((()=>{}))}else this._playerImage=je.cloneNode(!1);return this._container.appendChild(this._playerImage),this._container.appendChild(this._playerInfo),this._playerInfo.appendChild(this._playerName),this.options.showHealth?(this._playerHealth=document.createElement("div"),this._playerHealth.className="player__health",this._playerArmor=document.createElement("div"),this._playerArmor.className="player__armor",this._playerHealthBar=document.createElement("div"),this._playerHealthBar.className="player__health-bar",this._playerArmorBar=document.createElement("div"),this._playerArmorBar.className="player__armor-bar",this._playerHealth.appendChild(this._playerHealthBar),this._playerArmor.appendChild(this._playerArmorBar),this._playerInfo.appendChild(this._playerHealth),this._playerInfo.appendChild(this._playerArmor),this._playerHealth.hidden=this._playerArmor.hidden=!0):this._playerName.classList.add("playerNameNoHealth"),this._container.style.marginTop=`-${a}px`,this._container.style.marginLeft=`-${a}px`,this._container}update(){this._container&&(this._player.name!==this._currentName&&(this._playerName.innerHTML=this._currentName=this._player.name),this.options.showHealth&&(void 0!==this._player.health&&void 0!==this._player.armor?(this._playerHealth.hidden=!1,this._playerArmor.hidden=!1,this._playerHealthBar.style.width=Math.ceil(2.5*this._player.health)+"px",this._playerArmorBar.style.width=Math.ceil(2.5*this._player.armor)+"px"):(this._playerHealth.hidden=!0,this._playerArmor.hidden=!0)))}}class qe extends c.exports.Marker{constructor(e,t){super(new c.exports.LatLng(0,0),t),this._player=e,t.draggable=!1,t.icon=new Fe(e,{smallFace:t.smallFace,showSkinFace:t.showSkinFace,showBody:t.showBody,showHealth:t.showHealth}),c.exports.Util.setOptions(this,t)}getIcon(){return this.options.icon}panTo(){this._map&&this._map.panTo(this.getLatLng(),{animate:!1,noMoveStart:!0})}_resetZIndex(){}}var Ve=p({props:{player:{type:Object,required:!0},layerGroup:{type:Object,required:!0}},setup(e){let t=0;const a=De(),o=m((()=>a.state.components.playerMarkers)),n=m((()=>a.state.currentProjection)),s=m((()=>a.state.currentWorld)),r=m((()=>a.state.components.chatBalloons)),i=g(!1),l=new qe(e.player,{smallFace:o.value.smallFaces,showSkinFace:o.value.showSkinFaces,showBody:o.value.showBodies,showHealth:o.value.showHealth,interactive:!1,pane:"players"}),d=new c.exports.Popup({autoClose:!1,autoPan:!1,keepInView:!1,closeButton:!1,closeOnEscapeKey:!1,closeOnClick:!1,className:"leaflet-popup--chat",minWidth:0}),p=g(!1),h=g(0),w=m((()=>{const o=[];if(!r.value)return o;for(const n of a.state.chat.messages){if(n.timestamp<=t)break;if(5===o.length)break;"chat"===n.type&&n.playerAccount===e.player.account&&o.push(n)}return!o.length&&a.state.chat.messages.length&&(t=a.state.chat.messages[0].timestamp),o})),v=()=>{e.layerGroup.removeLayer(d),p.value=!1,w.value[0]&&(t=w.value[0].timestamp)},_=()=>{if(!i.value){const a=n.value.locationToLatLng(e.player.location);e.layerGroup.addLayer(l),l.setLatLng(a),d.setLatLng(a),i.value=!0,t=(new Date).getTime()}},f=()=>{i.value&&(e.layerGroup.removeLayer(l),e.layerGroup.removeLayer(d),i.value=!1,v(),h.value&&clearTimeout(h.value))};return y((()=>{s.value&&s.value.name===e.player.location.world&&_()})),u((()=>f())),{componentSettings:o,currentProjection:n,currentWorld:s,chatBalloonsEnabled:r,marker:l,markerVisible:i,chatBalloon:d,playerChat:w,updateChatBalloon:()=>{const a=w.value.reduceRight(((e,t)=>e+`<span>${t.message}</span>`),"");a==d.getContent()&&p.value||(d.setContent(a),p.value||(e.layerGroup.addLayer(d),p.value=!0,t=w.value[w.value.length-1].timestamp-1),h.value&&clearTimeout(h.value),h.value=setTimeout((()=>v()),8e3))},enableLayer:_,disableLayer:f}},watch:{player:{deep:!0,handler(e){if(this.currentWorld&&e.location.world===this.currentWorld.name)if(this.markerVisible){const t=this.currentProjection.locationToLatLng(e.location);this.marker.setLatLng(t),this.chatBalloon.setLatLng(t),this.marker.getIcon().update()}else this.enableLayer();else this.markerVisible&&this.disableLayer()}},playerChat(e){this.chatBalloonsEnabled&&this.markerVisible&&e.length&&this.updateChatBalloon()},currentWorld(e){e&&e.name===this.player.location.world?this.enableLayer():this.markerVisible&&this.disableLayer()},currentProjection(){const e=this.currentProjection.locationToLatLng(this.player.location);this.marker.setLatLng(e),this.chatBalloon.setLatLng(e)}},render:()=>null}),Ke=p({components:{PlayerMarker:Ve},props:{leaflet:{type:Object,required:!0}},setup(e){const t=De(),a=e.leaflet.createPane("players"),o=m((()=>t.state.players)),n=m((()=>t.state.players.size)),s=m((()=>t.state.ui.playersAboveMarkers)),r=m((()=>t.state.components.playerMarkers)),i=new c.exports.LayerGroup([],{pane:"players"});return h(n,(e=>a.classList.toggle("no-animations",e>150))),s.value&&(a.style.zIndex="600"),{players:o,componentSettings:r,layerGroup:i}},mounted(){this.componentSettings.hideByDefault?this.leaflet.getLayerManager().addHiddenLayer(this.layerGroup,De().state.messages.playersHeading,this.componentSettings.layerPriority):this.leaflet.getLayerManager().addLayer(this.layerGroup,!0,De().state.messages.playersHeading,this.componentSettings.layerPriority)},unmounted(){this.leaflet.removeLayer(this.layerGroup)},render:()=>null});Ke.render=function(e,t,a,o,n,s){const r=f("PlayerMarker");return E(!0),w(_,null,v(e.players,(([t,a])=>(E(),w(r,{key:t,player:a,layerGroup:e.layerGroup},null,8,["player","layerGroup"])))),128)};class Ye extends c.exports.Polyline{constructor(e,t){super(e,t),c.exports.Util.setOptions(this,t)}}class Qe extends c.exports.Polygon{constructor(e,t){super(e,t),c.exports.Util.setOptions(this,t)}}const Je=(e,t)=>{const a=!e.style.fillOpacity||e.style.fillOpacity<=0,o=ot(e,t,a),n=a?new Ye(o,l(i({},e.style),{minZoom:e.minZoom,maxZoom:e.maxZoom})):new Qe(o,l(i({},e.style),{minZoom:e.minZoom,maxZoom:e.maxZoom}));return e.label&&n.bindPopup((()=>at(e))),n},Xe=(e,t,a)=>{const o=!t.style||!t.style.fillOpacity||t.style.fillOpacity<=0,n=ot(t,a,o);if(!e)return Je(t,a);const s=e.getLatLngs();let r=!1;return tt(e.options,t.style)||(e.setStyle(t.style),r=!0),et(1===s.length?s[0]:s,n)||(e.setLatLngs(n),r=!0),e.closePopup(),e.unbindPopup(),e.bindPopup((()=>at(t))),r&&e.redraw(),e},et=(e,t)=>JSON.stringify(e)===JSON.stringify(t),tt=(e,t)=>e&&t&&e.color===t.color&&e.weight===t.weight&&e.opacity===t.opacity&&e.fillColor===t.fillColor&&e.fillOpacity===t.fillOpacity,at=e=>{const t=document.createElement("span");return e.popupContent?(t.classList.add("AreaPopup"),t.insertAdjacentHTML("afterbegin",e.popupContent)):e.isHTML?(t.classList.add("AreaPopup"),t.insertAdjacentHTML("afterbegin",e.label)):t.textContent=e.label,t},ot=(e,t,a)=>2===e.x.length?e.y[0]===e.y[1]?st(e,t,a):nt(e,t):e.y[0]===e.y[1]?it(e,t,a):rt(e,t),nt=(e,t)=>{const a=e.x[0],o=e.x[1],n=e.y[0],s=e.y[1],r=e.z[0],i=e.z[1];return[[t(o,s,i),t(a,s,i),t(a,s,r),t(o,s,r)],[t(o,n,i),t(a,n,i),t(a,n,r),t(o,n,r)],[t(o,s,i),t(o,n,i),t(a,n,i),t(a,s,i)],[t(a,s,i),t(a,n,i),t(a,n,r),t(a,s,r)],[t(o,s,r),t(o,n,r),t(a,n,r),t(a,s,r)],[t(o,s,i),t(o,n,i),t(o,n,r),t(o,s,r)]]},st=(e,t,a)=>{const o=e.x[0],n=e.x[1],s=e.y[1],r=e.z[0],i=e.z[1];return a?[t(n,s,i),t(o,s,i),t(o,s,r),t(n,s,r),t(n,s,i)]:[t(n,s,i),t(o,s,i),t(o,s,r),t(n,s,r)]},rt=(e,t)=>{const a=[],o=[],n=[];for(let s=0;s<e.x.length;s++)a[s]=t(e.x[s],e.y[0],e.z[s]),o[s]=t(e.x[s],e.y[1],e.z[s]);for(let s=0;s<e.x.length;s++){const t=[];t[0]=a[s],t[1]=o[s],t[2]=o[(s+1)%e.x.length],t[3]=a[(s+1)%e.x.length],n[s]=t}return n[e.x.length]=o,n[e.x.length+1]=a,n},it=(e,t,a)=>{const o=[];for(let n=0;n<e.x.length;n++)o[n]=t(e.x[n],e.y[1],e.z[n]);return a&&o.push(o[0]),o};var lt=p({props:{set:{type:Object,required:!0},layerGroup:{type:Object,required:!0}},setup(e){let t=0;const a=De(),o=m((()=>a.state.currentProjection)),n=m((()=>{const t=a.state.pendingSetUpdates.get(e.set.id);return t&&t.areaUpdates.length})),s=Object.freeze(new Map),r=t=>{let a=s.get(t);a&&(e.layerGroup.removeLayer(a),s.delete(t))},i=async()=>{const a=await De().dispatch(Re.POP_AREA_UPDATES,{markerSet:e.set.id,amount:10}),o=be();for(const t of a)if(t.removed)r(t.id);else{const a=Xe(s.get(t.id),t.payload,o);s.has(t.id)||e.layerGroup.addLayer(a),s.set(t.id,a)}t=n.value?requestAnimationFrame((()=>i())):0};h(o,(()=>{const t=be();for(const[a,o]of e.set.areas)Xe(s.get(a),o,t)})),h(n,((e,a)=>{e&&e>0&&0===a&&!t&&(t=requestAnimationFrame((()=>i())))})),y((()=>(()=>{const t=be();e.set.areas.forEach(((a,o)=>{const n=Je(a,t);s.set(o,n),e.layerGroup.addLayer(n)}))})())),u((()=>t&&cancelAnimationFrame(t)))},render:()=>null});const ct=(e,t)=>{const a=!e.style.fillOpacity||e.style.fillOpacity<=0,o=mt(e,t,a),n=a?new Ye(o,l(i({},e.style),{minZoom:e.minZoom,maxZoom:e.maxZoom})):new Qe(o,l(i({},e.style),{minZoom:e.minZoom,maxZoom:e.maxZoom}));return e.label&&n.bindPopup((()=>pt(e))),n},dt=(e,t,a)=>{const o=t.style&&t.style.fillOpacity&&t.style.fillOpacity<=0,n=mt(t,a,o);return e?(e.closePopup(),e.unbindPopup(),e.bindPopup((()=>pt(t))),e.setStyle(t.style),e.setLatLngs(n),e.redraw(),e):ct(t,a)},pt=e=>{const t=document.createElement("span");return e.popupContent?(t.classList.add("CirclePopup"),t.insertAdjacentHTML("afterbegin",e.popupContent)):e.isHTML?(t.classList.add("CirclePopup"),t.insertAdjacentHTML("afterbegin",e.label)):t.textContent=e.label,t},mt=(e,t,a)=>{const o=[];for(let n=0;n<360;n++){const a=n*Math.PI/180,s=e.radius[0]*Math.sin(a)+e.location.x,r=e.radius[1]*Math.cos(a)+e.location.z;o.push(t(s,e.location.y,r))}return a&&o.length&&o.push(o[0]),o};var ht=p({props:{set:{type:Object,required:!0},layerGroup:{type:Object,required:!0}},setup(e){let t=0;const a=De(),o=m((()=>a.state.currentProjection)),n=m((()=>{const t=a.state.pendingSetUpdates.get(e.set.id);return t&&t.circleUpdates.length})),s=Object.freeze(new Map),r=t=>{let a=s.get(t);a&&(e.layerGroup.removeLayer(a),s.delete(t))},i=async()=>{const a=await De().dispatch(Re.POP_CIRCLE_UPDATES,{markerSet:e.set.id,amount:10}),o=be();for(const t of a)if(t.removed)r(t.id);else{const a=dt(s.get(t.id),t.payload,o);s.has(t.id)||e.layerGroup.addLayer(a),s.set(t.id,a)}t=n.value?requestAnimationFrame((()=>i())):0};h(o,(()=>{const t=be();for(const[a,o]of e.set.circles)dt(s.get(a),o,t)})),h(n,((e,a)=>{e&&e>0&&0===a&&!t&&(t=requestAnimationFrame((()=>i())))})),y((()=>(()=>{const t=be();e.set.circles.forEach(((a,o)=>{const n=ct(a,t);s.set(o,n),e.layerGroup.addLayer(n)}))})())),u((()=>t&&cancelAnimationFrame(t)))},render:()=>null});const ut=(e,t)=>{const a=wt(e,t),o=new Ye(a,l(i({},e.style),{minZoom:e.minZoom,maxZoom:e.maxZoom}));return e.label&&o.bindPopup((()=>yt(e))),o},gt=(e,t,a)=>{const o=wt(t,a);return e?(e.closePopup(),e.unbindPopup(),e.bindPopup((()=>yt(t))),e.setStyle(t.style),e.setLatLngs(o),e.redraw(),e):ut(t,a)},yt=e=>{const t=document.createElement("span");return e.popupContent?(t.classList.add("LinePopup"),t.insertAdjacentHTML("afterbegin",e.popupContent)):e.isHTML?(t.classList.add("LinePopup"),t.insertAdjacentHTML("afterbegin",e.label)):t.textContent=e.label,t},wt=(e,t)=>{const a=[];for(let o=0;o<e.x.length;o++)a.push(t(e.x[o],e.y[o],e.z[o]));return a};var vt=p({props:{set:{type:Object,required:!0},layerGroup:{type:Object,required:!0}},setup(e){let t=0;const a=De(),o=m((()=>a.state.currentProjection)),n=m((()=>{const t=a.state.pendingSetUpdates.get(e.set.id);return t&&t.lineUpdates.length})),s=Object.freeze(new Map),r=t=>{let a=s.get(t);a&&(e.layerGroup.removeLayer(a),s.delete(t))},i=async()=>{const a=await De().dispatch(Re.POP_LINE_UPDATES,{markerSet:e.set.id,amount:10}),o=be();for(const t of a)if(t.removed)r(t.id);else{const a=gt(s.get(t.id),t.payload,o);s.has(t.id)||e.layerGroup.addLayer(a),s.set(t.id,a)}t=n.value?requestAnimationFrame((()=>i())):0};h(o,(()=>{const t=be();for(const[a,o]of e.set.lines)gt(s.get(a),o,t)})),h(n,((e,a)=>{e&&e>0&&0===a&&!t&&(t=requestAnimationFrame((()=>i())))})),y((()=>(()=>{const t=be();e.set.lines.forEach(((a,o)=>{const n=ut(a,t);s.set(o,n),e.layerGroup.addLayer(n)}))})())),u((()=>t&&cancelAnimationFrame(t)))},render:()=>null});const _t=document.createElement("div");_t.className="marker";const ft=document.createElement("img");ft.className="marker__icon";const Et=document.createElement("span");Et.className="marker__label";const bt=class extends c.exports.DivIcon{constructor(e){super(Object.assign(bt.defaultOptions,e))}createIcon(e){e&&c.exports.DomUtil.remove(e);const t=_t.cloneNode(!1),a=`${De().getters.serverConfig.dynmap.markers}_markers_/${this.options.icon}.png`,o=c.exports.point(this.options.iconSize);this._image=ft.cloneNode(!1),this._label=Et.cloneNode(!1);const n=[o.x,o.y].join("x");return this._image.width=o.x,this._image.height=o.y,this._image.src=a,this._label.classList.add(`marker__label--${n}`),this.options.isHtml?this._label.innerHTML=this.options.label:this._label.textContent=this.options.label,c.exports.Icon.prototype._setIconStyles.call(this,t,"icon"),t.appendChild(this._image),t.appendChild(this._label),t.classList.add("marker"),this.options.className&&t.classList.add(this.options.className),t}update(e){this._image&&e.icon!==this.options.icon&&(this._image.src=`${De().getters.serverConfig.dynmap.markers}_markers_/${e.icon}.png`,this.options.icon=e.icon);const t=c.exports.point(e.iconSize||[16,16]),a=c.exports.point(this.options.iconSize);!this._image||t.x===a.x&&t.y===a.y||(this._image.width=t.x,this._image.height=t.y,this.options.iconSize=e.iconSize),!this._label||e.label===this.options.label&&e.isHtml===this.options.isHtml||(e.isHtml?this._label.innerHTML=e.label:this._label.textContent=e.label,this.options.isHtml=e.isHtml,this.options.label=e.label)}};let St=bt;St.defaultOptions={icon:"default",label:"",iconSize:[16,16],isHtml:!1,className:""};class Lt extends c.exports.Marker{constructor(e,t){super(e,t),c.exports.Util.setOptions(this,t)}_resetZIndex(){}getIcon(){return this.options.icon}}const kt=(e,t)=>{const a=new Lt(t.locationToLatLng(e.location),{icon:new St({icon:e.icon,label:e.label,iconSize:e.dimensions,isHtml:e.isHTML}),maxZoom:e.maxZoom,minZoom:e.minZoom});return a.on("click",(e=>{e.target._map.panTo(e.target.getLatLng())})),e.popupContent&&a.bindPopup((()=>At(e))),a},Tt=(e,t,a)=>{if(!e)return kt(t,a);const o=e.getLatLng(),n=a.locationToLatLng(t.location);if(o.equals(n)||e.setLatLng(n),e instanceof Lt){const a=e.getIcon();a&&a instanceof St&&a.update({icon:t.icon,label:t.label,iconSize:t.dimensions,isHtml:t.isHTML})}return e.closePopup(),e.unbindPopup(),t.popupContent&&e.bindPopup((()=>At(t))),e},At=e=>{const t=document.createElement("span");return e.popupContent?(t.classList.add("MarkerPopup"),t.insertAdjacentHTML("afterbegin",e.popupContent)):e.isHTML?(t.classList.add("MarkerPopup"),t.insertAdjacentHTML("afterbegin",e.label)):t.textContent=e.label,t};var Ct=p({props:{set:{type:Object,required:!0},layerGroup:{type:Object,required:!0}},setup(e){let t=0;const a=De(),o=m((()=>a.state.currentProjection)),n=m((()=>{const t=a.state.pendingSetUpdates.get(e.set.id);return t&&t.markerUpdates.length})),s=Object.freeze(new Map),r=t=>{let a=s.get(t);a&&(e.layerGroup.removeLayer(a),s.delete(t))},i=async()=>{const a=await De().dispatch(Re.POP_MARKER_UPDATES,{markerSet:e.set.id,amount:10}),l=o.value;for(const t of a)if(t.removed)r(t.id);else{const a=Tt(s.get(t.id),t.payload,l);s.has(t.id)||e.layerGroup.addLayer(a),s.set(t.id,a)}t=n.value?requestAnimationFrame((()=>i())):0};h(o,(()=>{const t=o.value;for(const[a,o]of e.set.markers)Tt(s.get(a),o,t)})),h(n,((e,a)=>{e&&e>0&&0===a&&!t&&(t=requestAnimationFrame((()=>i())))})),y((()=>(()=>{const t=o.value;e.set.markers.forEach(((a,o)=>{const n=kt(a,t);s.set(o,n),e.layerGroup.addLayer(n)}))})())),u((()=>t&&cancelAnimationFrame(t)))},render:()=>null});class xt extends c.exports.LayerGroup{constructor(e){super([],e),this._zoomEndCallback=()=>this._updateLayerVisibility(),c.exports.Util.setOptions(this,e),this._zoomLimitedLayers=new Set}onAdd(e){return e.on("zoomend",this._zoomEndCallback,this),this._map=e,this._markerPane=e.getPane(`${this.options.id}-markers`)||e.createPane(`${this.options.id}-markers`),this._markerPane.classList.toggle("leaflet-pane--show-labels",this.options.showLabels),this._markerPane.style.zIndex=(401+this.options.priority).toString(),this._updateLayerVisibility(!0),this}onRemove(e){return super.onRemove(e),e.off("zoomend",this._zoomEndCallback,this),this}clearLayers(){return this._zoomLimitedLayers.clear(),super.clearLayers()}addLayer(e){const t=this.getLayerId(e);this._layers[t]=e,e instanceof c.exports.Marker?e.options.pane=`${this.options.id}-markers`:e instanceof c.exports.Path&&(e.options.pane="vectors");const a=this._isLayerZoomLimited(e);return a&&this._zoomLimitedLayers.add(e),this._map&&(a?this._isLayerVisible(e,this._map.getZoom())&&this._map.addLayer(e):this._map.addLayer(e)),this}removeLayer(e){return this._zoomLimitedLayers.delete(e),super.removeLayer(e)}update(e){this.options.showLabels=e.showLabels,this._markerPane&&this._markerPane.classList.toggle("leaflet-pane--show-labels",e.showLabels),e.minZoom===this.options.minZoom&&e.maxZoom===this.options.maxZoom||(this.options.minZoom=e.minZoom,this.options.maxZoom=e.maxZoom,this._updateLayerVisibility()),e.priority!==this.options.priority&&(this.options.priority=e.priority,this._markerPane&&(this._markerPane.style.zIndex=(401+this.options.priority).toString()))}_updateLayerVisibility(e){if(!this._map)return;const t=this._map.getZoom();if(this._isZoomLimited()){const e=t>=(this.options.minZoom||-1/0)&&t<=(this.options.maxZoom||1/0);this.eachLayer((a=>{this._zoomLimitedLayers.has(a)?this._isLayerVisible(a,t)?this._map.addLayer(a):this._map.removeLayer(a):e?this._map.addLayer(a):this._map.removeLayer(a)}),this)}else this._zoomLimitedLayers.size?this._zoomLimitedLayers.forEach((e=>{this._isLayerVisible(e,t)?this._map.addLayer(e):this._map.removeLayer(e)})):e&&this.eachLayer(this._map.addLayer,this._map)}_isZoomLimited(){return void 0!==this.options.maxZoom||void 0!==this.options.minZoom}_isLayerZoomLimited(e){return e.options&&void 0!==e.options.minZoom&&e.options&&void 0!==e.options.maxZoom}_isLayerVisible(e,t){let a=-1/0,o=1/0;return e.options&&void 0!==e.options.minZoom&&(a=e.options.minZoom),e.options&&void 0!==e.options.maxZoom&&(o=e.options.maxZoom),t>=a&&t<=o}}var Pt=p({components:{Areas:lt,Circles:ht,Lines:vt,Markers:Ct},props:{leaflet:{type:Object,required:!0},markerSet:{type:Object,required:!0}},setup(e){const t=De();return{markerSettings:m((()=>t.state.components.markers)),layerGroup:new xt({id:e.markerSet.id,minZoom:e.markerSet.minZoom,maxZoom:e.markerSet.maxZoom,showLabels:e.markerSet.showLabels||t.state.components.markers.showLabels,priority:e.markerSet.priority})}},watch:{markerSet:{handler(e){e&&this.layerGroup&&(this.layerGroup.update({id:this.markerSet.id,minZoom:this.markerSet.minZoom,maxZoom:this.markerSet.maxZoom,showLabels:this.markerSet.showLabels||De().state.components.markers.showLabels,priority:this.markerSet.priority}),e.hidden?this.leaflet.getLayerManager().addHiddenLayer(this.layerGroup,e.label,this.markerSet.priority):this.leaflet.getLayerManager().addLayer(this.layerGroup,!0,e.label,this.markerSet.priority))},deep:!0}},mounted(){this.markerSet.hidden?this.leaflet.getLayerManager().addHiddenLayer(this.layerGroup,this.markerSet.label,this.markerSet.priority):this.leaflet.getLayerManager().addLayer(this.layerGroup,!0,this.markerSet.label,this.markerSet.priority)},unmounted(){this.leaflet.getLayerManager().removeLayer(this.layerGroup)},render:()=>null});const Mt=S("data-v-75bb4ad8")(((e,t,a,o,n,s)=>{const r=f("Areas"),i=f("Circles"),l=f("Lines"),c=f("Markers");return E(),w(_,null,[b(r,{"layer-group":e.layerGroup,set:e.markerSet},null,8,["layer-group","set"]),b(i,{"layer-group":e.layerGroup,set:e.markerSet},null,8,["layer-group","set"]),b(l,{"layer-group":e.layerGroup,set:e.markerSet},null,8,["layer-group","set"]),b(c,{"layer-group":e.layerGroup,set:e.markerSet},null,8,["layer-group","set"])],64)}));Pt.render=Mt,Pt.__scopeId="data-v-75bb4ad8";const It=De();class zt extends c.exports.Control{constructor(e){super(e),this._locationChanged=!1,this._coordsContainer=c.exports.DomUtil.create("span","value coordinates"),this._chunkContainer=c.exports.DomUtil.create("span","value chunk"),this._regionContainer=c.exports.DomUtil.create("span","value region"),e.position="bottomleft",c.exports.Util.setOptions(this,e)}onAdd(e){const t=c.exports.DomUtil.create("div","leaflet-control-coordinates");return this._coordsContainer.textContent=this.options.showY?"-----, ----- , -----":"-----, -----",this._coordsContainer.dataset.label=this.options.label,t.appendChild(this._coordsContainer),this.options.showRegion&&(this._regionContainer.textContent="--------------",this._regionContainer.dataset.label=De().state.messages.locationRegion,t.appendChild(this._regionContainer)),this.options.showChunk&&(this._chunkContainer.textContent="----, ----",this._chunkContainer.dataset.label=De().state.messages.locationChunk,t.appendChild(this._chunkContainer)),e.on("mousemove",this._onMouseMove,this),e.on("mouseout",this._onMouseOut,this),t}remove(){return this._map?(this._map.on("mousemove",this._onMouseMove,this),this._map.on("mouseout",this._onMouseOut,this),c.exports.Control.prototype.remove.call(this),this):this}_onMouseMove(e){this._map&&It.state.currentWorld&&(this._location=It.state.currentProjection.latLngToLocation(e.latlng,It.state.currentWorld.seaLevel+1),this._locationChanged||(this._locationChanged=!0,requestAnimationFrame((()=>this._update()))))}_onMouseOut(){this._map&&(this._location=void 0,this._locationChanged||(this._locationChanged=!0,requestAnimationFrame((()=>this._update()))))}_update(){if(!this._map||!It.state.currentWorld||!this._locationChanged)return;if(this._locationChanged=!1,!this._location)return this.options.showY?this._coordsContainer.textContent="-----, ----- , -----":this._coordsContainer.textContent="-----, -----",this.options.showRegion&&(this._regionContainer.textContent="--------------"),void(this.options.showChunk&&(this._chunkContainer.textContent="----, ----"));const e=Math.round(this._location.x).toString().padStart(5," "),t=this._location.y.toString().padStart(3," "),a=Math.round(this._location.z).toString().padStart(5," "),o=Math.floor(this._location.x/512).toString().padStart(3," "),n=Math.floor(this._location.z/512).toString().padStart(3," "),s=Math.floor(this._location.x/16).toString().padStart(4," "),r=Math.floor(this._location.z/16).toString().padStart(4," ");this.options.showY?this._coordsContainer.textContent=`${e}, ${t}, ${a}`:this._coordsContainer.textContent=`${e}, ${a}`,this.options.showRegion&&(this._regionContainer.textContent=`r.${o}, ${n}.mca`),this.options.showChunk&&(this._chunkContainer.textContent=`${s}, ${r}`)}}var Ut=p({props:{leaflet:{type:Object,required:!0}},setup(e){const t=De(),a=m((()=>t.state.components.coordinatesControl));let o=new zt(a.value);h(a,(t=>{e.leaflet.removeControl(o),t&&(o=new zt(t),e.leaflet.addControl(o))}),{deep:!0}),y((()=>e.leaflet.addControl(o))),u((()=>e.leaflet.removeControl(o)))},render:()=>null});let Rt=document.getElementById("icon--clock_moon"),Ot=document.getElementById("svg-sprite-component-wrap");if(Ot||(Ot=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ot.id="svg-sprite-component-wrap",Ot.style.setProperty("display","none"),document.body.appendChild(Ot)),!Rt){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ot.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 200 160"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--clock_moon"),e.innerHTML='\n <g>\n  <path d="m85.562 65.682v9.2246h6.4688v6.75h-6.4688v13.133h12.031v-5.7891h3.4688v-3.625h5.4062v9.4141h8.2031v-29.107h-15.797v4.9746h-6.625v-4.9746h-6.6875zm25.545 5.3672v7.2148h-7.5215v-7.2129l7.5215-0.001953z"></path>\n  <g transform="translate(-21.213 1.7678)">\n   <path d="m100.56 53.492a1.0677 1.0677 0 0 0-1.0684 1.0664v6.7402a1.0677 1.0677 0 0 0 1.0684 1.0684 1.0677 1.0677 0 0 0 1.0664-1.0684v-6.7402a1.0677 1.0677 0 0 0-1.0664-1.0664z"></path>\n   <path d="m97.186 56.861a1.0677 1.0677 0 0 0-1.0664 1.0684 1.0677 1.0677 0 0 0 1.0664 1.0664h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0664 1.0677 1.0677 0 0 0-1.0684-1.0684h-6.7402z"></path>\n  </g>\n  <g transform="translate(-3.5355 19.003)">\n   <path d="m118.96 79.605a1.0677 1.0677 0 0 0-1.0684 1.0684 1.0677 1.0677 0 0 0 1.0684 1.0684h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0684 1.0677 1.0677 0 0 0-1.0684-1.0684h-6.7402z"></path>\n   <path d="m122.32 76.236a1.0677 1.0677 0 0 0-1.0664 1.0684v6.7383a1.0677 1.0677 0 0 0 1.0664 1.0684 1.0677 1.0677 0 0 0 1.0684-1.0684v-6.7383a1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n  </g>\n </g>\n'}let Nt=document.getElementById("icon--clock_moon_rain"),Dt=document.getElementById("svg-sprite-component-wrap");if(Dt||(Dt=document.createElementNS("http://www.w3.org/2000/svg","svg"),Dt.id="svg-sprite-component-wrap",Dt.style.setProperty("display","none"),document.body.appendChild(Dt)),!Nt){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Dt.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 200 160"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--clock_moon_rain"),e.innerHTML='\n <g>\n  <path d="m89.938 59.713v9.2246h6.4688v3.0781c0.24224 0.24447 0.46245 0.5159 0.66406 0.80859 0.9096 1.0269 0.91602 1.7812 0.91602 1.7812 4.5712-2.0833 9.3588-1.6889 10.611 4.8008h2.2461v5.6191c1.7289 0.89891 2.5984 2.3193 2.875 3.7949h5.3281v-29.107h-15.797v4.9746h-6.625v-4.9746zm25.545 5.3672v7.2148h-7.5215v-7.2129z"></path>\n  <g>\n   <path d="m79.343 55.229a1.0677 1.0677 0 0 0-1.0684 1.0664v6.7402a1.0677 1.0677 0 0 0 1.0684 1.0684 1.0677 1.0677 0 0 0 1.0664-1.0684v-6.7402a1.0677 1.0677 0 0 0-1.0664-1.0664z"></path>\n   <path d="m75.972 58.598a1.0677 1.0677 0 0 0-1.0664 1.0684 1.0677 1.0677 0 0 0 1.0664 1.0664h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0664 1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n   <path d="m115.42 97.015a1.0677 1.0677 0 0 0-1.0684 1.0684 1.0677 1.0677 0 0 0 1.0684 1.0684h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0684 1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n   <path d="m118.79 93.646a1.0677 1.0677 0 0 0-1.0664 1.0684v6.7383a1.0677 1.0677 0 0 0 1.0664 1.0684 1.0677 1.0677 0 0 0 1.0684-1.0684v-6.7383a1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n  </g>\n  <path d="m91.104 71.066c-1.1528-0.01129-2.3479 0.19839-3.4434 0.61524-2.1909 0.83369-3.8886 2.4144-4.3047 4.4219-0.41608 2.0074 0.34439 4.7108 3.793 8.0312a1.071 1.071 0 0 1 0.0293 1.5137 1.071 1.071 0 0 1-1.5137 0.0293c-1.2149-1.1697-2.1466-2.3208-2.8555-3.4453-4.7346-1.035-7.5122 0.63769-8.7578 3.0234-1.2206 2.3379-0.85898 5.4819 1.291 7.7988h36.109c0.84689-0.74667 1.5903-2.6029 1.1738-4.2891-0.41806-1.6926-1.724-3.2474-5.1953-3.5625-0.95461 1.2047-2.2927 2.1692-4.041 2.6699a1.071 1.071 0 0 1-1.3242-0.73438 1.071 1.071 0 0 1 0.73438-1.3242c1.4086-0.40342 2.4445-1.1778 3.1465-2.1387a1.071 1.071 0 0 1 0.2461-0.36523c1e-3 -2e-3 3e-3 -0.0039 4e-3 -0.0059 0.92582-1.506 1.1077-3.3797 0.65625-5.0039-0.3953-1.4223-1.2601-2.5773-2.5371-3.1543-1.2102-0.54682-2.8829-0.61578-5.123 0.33008 0.12671 0.75629 0.18427 1.5621 0.12695 2.4375a1.071 1.071 0 0 1-1.1387 0.99805 1.071 1.071 0 0 1-0.99805-1.1387c0.21826-3.3336-1.0422-5.0613-2.8906-5.9961-0.92423-0.46739-2.0347-0.69965-3.1875-0.71094z" stroke-width="0"></path>\n  <g>\n   <path d="m80.875 96.59a1.071 1.071 0 0 0-0.90234 0.49609l-2.4551 3.8555a1.071 1.071 0 0 0 0.32812 1.4785 1.071 1.071 0 0 0 1.4785-0.32812l2.4551-3.8555a1.071 1.071 0 0 0-0.32617-1.4785 1.071 1.071 0 0 0-0.57812-0.16797z"></path>\n   <path d="m94.133 96.59a1.071 1.071 0 0 0-0.90039 0.49609l-2.457 3.8555a1.071 1.071 0 0 0 0.32812 1.4785 1.071 1.071 0 0 0 1.4785-0.32812l2.457-3.8555a1.071 1.071 0 0 0-0.32812-1.4785 1.071 1.071 0 0 0-0.57813-0.16797z"></path>\n   <path d="m107.39 96.59a1.071 1.071 0 0 0-0.90039 0.49609l-2.4551 3.8555a1.071 1.071 0 0 0 0.32812 1.4785 1.071 1.071 0 0 0 1.4785-0.32812l2.4551-3.8555a1.071 1.071 0 0 0-0.32813-1.4785 1.071 1.071 0 0 0-0.57813-0.16797z"></path>\n   <path d="m86.178 104.54a1.071 1.071 0 0 0-0.90039 0.49414l-2.457 3.8555a1.071 1.071 0 0 0 0.32813 1.4805 1.071 1.071 0 0 0 1.4785-0.32812l2.457-3.8555a1.071 1.071 0 0 0-0.32812-1.4785 1.071 1.071 0 0 0-0.57812-0.16797z"></path>\n   <path d="m99.438 104.54a1.071 1.071 0 0 0-0.90234 0.49414l-2.4551 3.8555a1.071 1.071 0 0 0 0.32812 1.4805 1.071 1.071 0 0 0 1.4785-0.32812l2.4551-3.8555a1.071 1.071 0 0 0-0.32813-1.4785 1.071 1.071 0 0 0-0.57617-0.16797z"></path>\n  </g>\n </g>\n'}let Ht=document.getElementById("icon--clock_moon_storm"),Bt=document.getElementById("svg-sprite-component-wrap");if(Bt||(Bt=document.createElementNS("http://www.w3.org/2000/svg","svg"),Bt.id="svg-sprite-component-wrap",Bt.style.setProperty("display","none"),document.body.appendChild(Bt)),!Ht){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Bt.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 200 160"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--clock_moon_storm"),e.innerHTML='\n <g>\n  <path d="m89.938 59.713v9.2246h6.4688v3.0781c0.24224 0.24447 0.46245 0.5159 0.66406 0.80859 0.9096 1.0269 0.91602 1.7812 0.91602 1.7812 4.5712-2.0833 9.3588-1.6889 10.611 4.8008h2.2461v5.6191c1.7289 0.89891 2.5984 2.3193 2.875 3.7949h5.3281v-29.107h-15.797v4.9746h-6.625v-4.9746zm25.545 5.3672v7.2148h-7.5215v-7.2129z"></path>\n  <path d="m91.104 71.066c-1.1528-0.01129-2.3479 0.19839-3.4434 0.61524-2.1909 0.83369-3.8886 2.4144-4.3047 4.4219-0.41608 2.0074 0.34439 4.7108 3.793 8.0312a1.071 1.071 0 0 1 0.0293 1.5137 1.071 1.071 0 0 1-1.5137 0.0293c-1.2149-1.1697-2.1466-2.3208-2.8555-3.4453-4.7346-1.035-7.5122 0.63769-8.7578 3.0234-1.2206 2.3379-0.85898 5.4819 1.291 7.7988h36.109c0.84689-0.74667 1.5903-2.6029 1.1738-4.2891-0.41806-1.6926-1.724-3.2474-5.1953-3.5625-0.95461 1.2047-2.2927 2.1692-4.041 2.6699a1.071 1.071 0 0 1-1.3242-0.73438 1.071 1.071 0 0 1 0.73438-1.3242c1.4086-0.40342 2.4445-1.1778 3.1465-2.1387a1.071 1.071 0 0 1 0.2461-0.36523c1e-3 -2e-3 3e-3 -0.0039 4e-3 -0.0059 0.92582-1.506 1.1077-3.3797 0.65625-5.0039-0.3953-1.4223-1.2601-2.5773-2.5371-3.1543-1.2102-0.54682-2.8829-0.61578-5.123 0.33008 0.12671 0.75629 0.18427 1.5621 0.12695 2.4375a1.071 1.071 0 0 1-1.1387 0.99805 1.071 1.071 0 0 1-0.99805-1.1387c0.21826-3.3336-1.0422-5.0613-2.8906-5.9961-0.92423-0.46739-2.0347-0.69965-3.1875-0.71094z" stroke-width="0"></path>\n  <path d="m86.346 96.055a1.071 1.071 0 0 0-0.87891 0.53516l-2.5059 4.3398a1.0711 1.0711 0 0 0 0.73242 1.5879l1.8926 0.35156-3.3848 5.8613a1.071 1.071 0 0 0 0.39258 1.4629 1.071 1.071 0 0 0 1.4629-0.39258l4.1406-7.1719a1.0711 1.0711 0 0 0-0.73242-1.5879l-1.8906-0.35157 1.748-3.0293a1.071 1.071 0 0 0-0.39258-1.4629 1.071 1.071 0 0 0-0.58398-0.14258z"></path>\n  <path d="m101.81 96.055a1.071 1.071 0 0 0-0.8789 0.53516l-2.5059 4.3398a1.0711 1.0711 0 0 0 0.73242 1.5879l1.8926 0.35156-3.3848 5.8613a1.071 1.071 0 0 0 0.39258 1.4629 1.071 1.071 0 0 0 1.4629-0.39258l4.1406-7.1719a1.0711 1.0711 0 0 0-0.73243-1.5879l-1.8906-0.35157 1.748-3.0293a1.071 1.071 0 0 0-0.39258-1.4629 1.071 1.071 0 0 0-0.58399-0.14258z"></path>\n </g>\n'}let $t=document.getElementById("icon--clock_sun"),jt=document.getElementById("svg-sprite-component-wrap");if(jt||(jt=document.createElementNS("http://www.w3.org/2000/svg","svg"),jt.id="svg-sprite-component-wrap",jt.style.setProperty("display","none"),document.body.appendChild(jt)),!$t){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");jt.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 200 160"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--clock_sun"),e.innerHTML='\n <g stroke-width="0">\n  <path d="m118.96 79.605a1.0677 1.0677 0 0 0-1.0684 1.0684 1.0677 1.0677 0 0 0 1.0684 1.0684h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0684 1.0677 1.0677 0 0 0-1.0684-1.0684h-6.7402z"></path>\n  <path d="m125.59 67.951a1.0677 1.0677 0 0 0-0.2832 0.035156l-6.5117 1.7441a1.0677 1.0677 0 0 0-0.75391 1.3086 1.0677 1.0677 0 0 0 1.3066 0.75586l6.5117-1.7461a1.0677 1.0677 0 0 0 0.75391-1.3066 1.0677 1.0677 0 0 0-1.0234-0.79102z"></path>\n  <path d="m119.09 89.516a1.0677 1.0677 0 0 0-1.0508 0.79102 1.0677 1.0677 0 0 0 0.7539 1.3086l6.5117 1.7441a1.0677 1.0677 0 0 0 1.3066-0.75586 1.0677 1.0677 0 0 0-0.7539-1.3066l-6.5117-1.7441a1.0677 1.0677 0 0 0-0.25586-0.037109z"></path>\n  <path d="m123.93 55.709a1.0677 1.0677 0 0 0-0.72461 0.31055l-4.7656 4.7656a1.0677 1.0677 0 0 0 0 1.5117 1.0677 1.0677 0 0 0 1.5098 0l4.7656-4.7656a1.0677 1.0677 0 0 0 0-1.5117 1.0677 1.0677 0 0 0-0.78515-0.31055z"></path>\n  <path d="m99.68 98.006a1.0677 1.0677 0 0 0-1.0684 1.0684v6.7383a1.0677 1.0677 0 0 0 1.0684 1.0684 1.0677 1.0677 0 0 0 1.0684-1.0684v-6.7383a1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n  <path d="m109.6 98.121a1.0677 1.0677 0 0 0-0.28321 0.035156 1.0677 1.0677 0 0 0-0.7539 1.3086l1.7441 6.5098a1.0677 1.0677 0 0 0 1.3066 0.75391 1.0677 1.0677 0 0 0 0.75586-1.3066l-1.7441-6.5098a1.0677 1.0677 0 0 0-1.0254-0.79102z"></path>\n  <path d="m89.789 98.117a1.0677 1.0677 0 0 0-1.0508 0.79102l-1.7441 6.5098a1.0677 1.0677 0 0 0 0.75586 1.3066 1.0677 1.0677 0 0 0 1.3066-0.75391l1.7461-6.5098a1.0677 1.0677 0 0 0-0.75586-1.3086 1.0677 1.0677 0 0 0-0.25781-0.035156z"></path>\n  <path d="m118.78 98.246a1.0677 1.0677 0 0 0-0.72461 0.3125 1.0677 1.0677 0 0 0 0 1.5098l4.7656 4.7656a1.0677 1.0677 0 0 0 1.5098 0 1.0677 1.0677 0 0 0 0-1.5098l-4.7656-4.7656a1.0677 1.0677 0 0 0-0.78516-0.3125z"></path>\n  <path d="m74.541 78.73a1.0677 1.0677 0 0 0-1.0684 1.0664 1.0677 1.0677 0 0 0 1.0684 1.0684h6.7402a1.0677 1.0677 0 0 0 1.0664-1.0684 1.0677 1.0677 0 0 0-1.0664-1.0664h-6.7402z"></path>\n  <path d="m81.174 88.641a1.0677 1.0677 0 0 0-0.28516 0.037109l-6.5098 1.7441a1.0677 1.0677 0 0 0-0.75391 1.3086 1.0677 1.0677 0 0 0 1.3066 0.75391l6.5098-1.7441a1.0677 1.0677 0 0 0 0.75586-1.3066 1.0677 1.0677 0 0 0-1.0234-0.79297z"></path>\n  <path d="m74.678 67.076a1.0677 1.0677 0 0 0-1.0488 0.79102 1.0677 1.0677 0 0 0 0.75391 1.3086l6.5098 1.7441a1.0677 1.0677 0 0 0 1.3086-0.75586 1.0677 1.0677 0 0 0-0.75586-1.3066l-6.5098-1.7441a1.0677 1.0677 0 0 0-0.25781-0.037109z"></path>\n  <path d="m81.012 97.863a1.0677 1.0677 0 0 0-0.72656 0.3125l-4.7656 4.7656a1.0677 1.0677 0 0 0 0 1.5098 1.0677 1.0677 0 0 0 1.5117 0l4.7656-4.7656a1.0677 1.0677 0 0 0 0-1.5098 1.0677 1.0677 0 0 0-0.78516-0.3125z"></path>\n  <path d="m100.56 53.492a1.0677 1.0677 0 0 0-1.0684 1.0664v6.7402a1.0677 1.0677 0 0 0 1.0684 1.0684 1.0677 1.0677 0 0 0 1.0664-1.0684v-6.7402a1.0677 1.0677 0 0 0-1.0664-1.0664z"></path>\n  <path d="m88.908 53.607a1.0677 1.0677 0 0 0-0.28516 0.035156 1.0677 1.0677 0 0 0-0.75391 1.3086l1.7441 6.5098a1.0677 1.0677 0 0 0 1.3086 0.75391 1.0677 1.0677 0 0 0 0.75391-1.3066l-1.7441-6.5098a1.0677 1.0677 0 0 0-1.0234-0.79102z"></path>\n  <path d="m112.23 53.611a1.0677 1.0677 0 0 0-1.0508 0.79102l-1.7441 6.5098a1.0677 1.0677 0 0 0 0.75586 1.3066 1.0677 1.0677 0 0 0 1.3066-0.75391l1.7441-6.5098a1.0677 1.0677 0 0 0-0.7539-1.3086 1.0677 1.0677 0 0 0-0.25781-0.035156z"></path>\n  <path d="m76.627 55.227a1.0675 1.0675 0 0 0-0.72461 0.3125 1.0675 1.0675 0 0 0 0 1.5098l4.7656 4.7656a1.0675 1.0675 0 0 0 1.5098 0 1.0675 1.0675 0 0 0 0-1.5098l-4.7656-4.7656a1.0675 1.0675 0 0 0-0.78516-0.3125z"></path>\n  <rect x="85.563" y="65.681" width="29.108" height="29.109"></rect>\n </g>\n'}let Zt=document.getElementById("icon--clock_sun_rain"),Wt=document.getElementById("svg-sprite-component-wrap");if(Wt||(Wt=document.createElementNS("http://www.w3.org/2000/svg","svg"),Wt.id="svg-sprite-component-wrap",Wt.style.setProperty("display","none"),document.body.appendChild(Wt)),!Zt){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Wt.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 200 160"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--clock_sun_rain"),e.innerHTML='\n <g>\n  <g>\n   <path d="m123.33 73.355a1.0677 1.0677 0 0 0-1.0684 1.0684 1.0677 1.0677 0 0 0 1.0684 1.0684h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0684 1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n   <path d="m129.96 61.701a1.0677 1.0677 0 0 0-0.2832 0.03516l-6.5117 1.7441a1.0677 1.0677 0 0 0-0.75391 1.3086 1.0677 1.0677 0 0 0 1.3066 0.75586l6.5117-1.7461a1.0677 1.0677 0 0 0 0.75391-1.3066 1.0677 1.0677 0 0 0-1.0234-0.79102z"></path>\n   <path d="m123.46 83.266a1.0677 1.0677 0 0 0-1.0508 0.79102 1.0677 1.0677 0 0 0 0.7539 1.3086l6.5117 1.7441a1.0677 1.0677 0 0 0 1.3066-0.75586 1.0677 1.0677 0 0 0-0.7539-1.3066l-6.5117-1.7441a1.0677 1.0677 0 0 0-0.25586-0.03711z"></path>\n   <path d="m128.3 49.459a1.0677 1.0677 0 0 0-0.72461 0.31055l-4.7656 4.7656a1.0677 1.0677 0 0 0 0 1.5117 1.0677 1.0677 0 0 0 1.5098 0l4.7656-4.7656a1.0677 1.0677 0 0 0 0-1.5117 1.0677 1.0677 0 0 0-0.78515-0.31055z"></path>\n   <path d="m114.37 94.203a1.0677 1.0677 0 0 0-0.28321 0.04687 1.0677 1.0677 0 0 0-0.70117 1.3379l1.3027 4.1777a1.0677 1.0677 0 0 0 1.3359 0.70118 1.0677 1.0677 0 0 0 0.70313-1.3359l-1.3027-4.1797a1.0677 1.0677 0 0 0-1.0547-0.74805z"></path>\n   <path d="m123.16 91.996a1.0677 1.0677 0 0 0-0.72461 0.3125 1.0677 1.0677 0 0 0 0 1.5098l4.7656 4.7656a1.0677 1.0677 0 0 0 1.5098 0 1.0677 1.0677 0 0 0 0-1.5098l-4.7656-4.7656a1.0677 1.0677 0 0 0-0.78516-0.3125z"></path>\n   <path d="m104.93 47.242a1.0677 1.0677 0 0 0-1.0684 1.0664v6.7402a1.0677 1.0677 0 0 0 1.0684 1.0684 1.0677 1.0677 0 0 0 1.0664-1.0684v-6.7402a1.0677 1.0677 0 0 0-1.0664-1.0664z"></path>\n   <path d="m93.283 47.357a1.0677 1.0677 0 0 0-0.28516 0.03516 1.0677 1.0677 0 0 0-0.75391 1.3086l1.7441 6.5098a1.0677 1.0677 0 0 0 1.3086 0.75391 1.0677 1.0677 0 0 0 0.75391-1.3066l-1.7441-6.5098a1.0677 1.0677 0 0 0-1.0234-0.79102z"></path>\n   <path d="m116.6 47.361a1.0677 1.0677 0 0 0-1.0508 0.79102l-1.7441 6.5098a1.0677 1.0677 0 0 0 0.75586 1.3066 1.0677 1.0677 0 0 0 1.3066-0.75391l1.7441-6.5098a1.0677 1.0677 0 0 0-0.7539-1.3086 1.0677 1.0677 0 0 0-0.25781-0.03516z"></path>\n   <path d="m81.002 48.977a1.0677 1.0677 0 0 0-0.72461 0.3125 1.0677 1.0677 0 0 0 0 1.5098l4.7656 4.7656a1.0677 1.0677 0 0 0 1.5098 0 1.0677 1.0677 0 0 0 0-1.5098l-4.7656-4.7656a1.0677 1.0677 0 0 0-0.78516-0.3125z"></path>\n  </g>\n  <path d="m89.938 59.432v10.852c3.4258-0.39375 6.9291 0.9376 7.9922 4.6094 0.40346-0.21278 0.35849-0.19025 0.44531-0.23633 8.3721-3.8563 11.803 4.5742 8.5703 9.4219 4.2397 0.20726 6.1905 2.2386 6.7266 4.4609h5.375v-29.107zm8.6211 15.486c-65.706-49.945-32.853-24.973 0 0z"></path>\n  <g>\n   <path d="m80.875 96.59a1.071 1.071 0 0 0-0.90234 0.49609l-2.4551 3.8555a1.071 1.071 0 0 0 0.32812 1.4785 1.071 1.071 0 0 0 1.4785-0.32812l2.4551-3.8555a1.071 1.071 0 0 0-0.32617-1.4785 1.071 1.071 0 0 0-0.57812-0.16797z"></path>\n   <path d="m94.133 96.59a1.071 1.071 0 0 0-0.90039 0.49609l-2.457 3.8555a1.071 1.071 0 0 0 0.32812 1.4785 1.071 1.071 0 0 0 1.4785-0.32812l2.457-3.8555a1.071 1.071 0 0 0-0.32812-1.4785 1.071 1.071 0 0 0-0.57813-0.16797z"></path>\n   <path d="m107.39 96.59a1.071 1.071 0 0 0-0.90039 0.49609l-2.4551 3.8555a1.071 1.071 0 0 0 0.32812 1.4785 1.071 1.071 0 0 0 1.4785-0.32812l2.4551-3.8555a1.071 1.071 0 0 0-0.32813-1.4785 1.071 1.071 0 0 0-0.57813-0.16797z"></path>\n   <path d="m86.178 104.54a1.071 1.071 0 0 0-0.90039 0.49414l-2.457 3.8555a1.071 1.071 0 0 0 0.32813 1.4805 1.071 1.071 0 0 0 1.4785-0.32812l2.457-3.8555a1.071 1.071 0 0 0-0.32812-1.4785 1.071 1.071 0 0 0-0.57812-0.16797z"></path>\n   <path d="m99.438 104.54a1.071 1.071 0 0 0-0.90234 0.49414l-2.4551 3.8555a1.071 1.071 0 0 0 0.32812 1.4805 1.071 1.071 0 0 0 1.4785-0.32812l2.4551-3.8555a1.071 1.071 0 0 0-0.32813-1.4785 1.071 1.071 0 0 0-0.57617-0.16797z"></path>\n  </g>\n  <path d="m91.104 71.066c-1.1528-0.01129-2.3479 0.19839-3.4434 0.61524-2.1909 0.83369-3.8886 2.4144-4.3047 4.4219-0.41608 2.0074 0.34439 4.7108 3.793 8.0312a1.071 1.071 0 0 1 0.0293 1.5137 1.071 1.071 0 0 1-1.5137 0.0293c-1.2149-1.1697-2.1466-2.3208-2.8555-3.4453-4.7346-1.035-7.5122 0.63769-8.7578 3.0234-1.2206 2.3379-0.85898 5.4819 1.291 7.7988h36.109c0.84689-0.74667 1.5903-2.6029 1.1738-4.2891-0.41806-1.6926-1.724-3.2474-5.1953-3.5625-0.95461 1.2047-2.2927 2.1692-4.041 2.6699a1.071 1.071 0 0 1-1.3242-0.73438 1.071 1.071 0 0 1 0.73438-1.3242c1.4086-0.40342 2.4445-1.1778 3.1465-2.1387a1.071 1.071 0 0 1 0.2461-0.36523c1e-3 -2e-3 3e-3 -0.0039 4e-3 -0.0059 0.92582-1.506 1.1077-3.3797 0.65625-5.0039-0.3953-1.4223-1.2601-2.5773-2.5371-3.1543-1.2102-0.54682-2.8829-0.61578-5.123 0.33008 0.12671 0.75629 0.18427 1.5621 0.12695 2.4375a1.071 1.071 0 0 1-1.1387 0.99805 1.071 1.071 0 0 1-0.99805-1.1387c0.21826-3.3336-1.0422-5.0613-2.8906-5.9961-0.92423-0.46739-2.0347-0.69965-3.1875-0.71094z"></path>\n </g>\n'}let Gt=document.getElementById("icon--clock_sun_storm"),Ft=document.getElementById("svg-sprite-component-wrap");if(Ft||(Ft=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ft.id="svg-sprite-component-wrap",Ft.style.setProperty("display","none"),document.body.appendChild(Ft)),!Gt){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ft.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 200 160"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--clock_sun_storm"),e.innerHTML='\n <g>\n  <g>\n   <path d="m123.33 73.355a1.0677 1.0677 0 0 0-1.0684 1.0684 1.0677 1.0677 0 0 0 1.0684 1.0684h6.7402a1.0677 1.0677 0 0 0 1.0684-1.0684 1.0677 1.0677 0 0 0-1.0684-1.0684z"></path>\n   <path d="m129.96 61.701a1.0677 1.0677 0 0 0-0.2832 0.03516l-6.5117 1.7441a1.0677 1.0677 0 0 0-0.75391 1.3086 1.0677 1.0677 0 0 0 1.3066 0.75586l6.5117-1.7461a1.0677 1.0677 0 0 0 0.75391-1.3066 1.0677 1.0677 0 0 0-1.0234-0.79102z"></path>\n   <path d="m123.46 83.266a1.0677 1.0677 0 0 0-1.0508 0.79102 1.0677 1.0677 0 0 0 0.7539 1.3086l6.5117 1.7441a1.0677 1.0677 0 0 0 1.3066-0.75586 1.0677 1.0677 0 0 0-0.7539-1.3066l-6.5117-1.7441a1.0677 1.0677 0 0 0-0.25586-0.03711z"></path>\n   <path d="m128.3 49.459a1.0677 1.0677 0 0 0-0.72461 0.31055l-4.7656 4.7656a1.0677 1.0677 0 0 0 0 1.5117 1.0677 1.0677 0 0 0 1.5098 0l4.7656-4.7656a1.0677 1.0677 0 0 0 0-1.5117 1.0677 1.0677 0 0 0-0.78515-0.31055z"></path>\n   <path d="m114.37 94.203a1.0677 1.0677 0 0 0-0.28321 0.04687 1.0677 1.0677 0 0 0-0.70117 1.3379l1.3027 4.1777a1.0677 1.0677 0 0 0 1.3359 0.70118 1.0677 1.0677 0 0 0 0.70313-1.3359l-1.3027-4.1797a1.0677 1.0677 0 0 0-1.0547-0.74805z"></path>\n   <path d="m123.16 91.996a1.0677 1.0677 0 0 0-0.72461 0.3125 1.0677 1.0677 0 0 0 0 1.5098l4.7656 4.7656a1.0677 1.0677 0 0 0 1.5098 0 1.0677 1.0677 0 0 0 0-1.5098l-4.7656-4.7656a1.0677 1.0677 0 0 0-0.78516-0.3125z"></path>\n   <path d="m104.93 47.242a1.0677 1.0677 0 0 0-1.0684 1.0664v6.7402a1.0677 1.0677 0 0 0 1.0684 1.0684 1.0677 1.0677 0 0 0 1.0664-1.0684v-6.7402a1.0677 1.0677 0 0 0-1.0664-1.0664z"></path>\n   <path d="m93.283 47.357a1.0677 1.0677 0 0 0-0.28516 0.03516 1.0677 1.0677 0 0 0-0.75391 1.3086l1.7441 6.5098a1.0677 1.0677 0 0 0 1.3086 0.75391 1.0677 1.0677 0 0 0 0.75391-1.3066l-1.7441-6.5098a1.0677 1.0677 0 0 0-1.0234-0.79102z"></path>\n   <path d="m116.6 47.361a1.0677 1.0677 0 0 0-1.0508 0.79102l-1.7441 6.5098a1.0677 1.0677 0 0 0 0.75586 1.3066 1.0677 1.0677 0 0 0 1.3066-0.75391l1.7441-6.5098a1.0677 1.0677 0 0 0-0.7539-1.3086 1.0677 1.0677 0 0 0-0.25781-0.03516z"></path>\n   <path d="m81.002 48.977a1.0677 1.0677 0 0 0-0.72461 0.3125 1.0677 1.0677 0 0 0 0 1.5098l4.7656 4.7656a1.0677 1.0677 0 0 0 1.5098 0 1.0677 1.0677 0 0 0 0-1.5098l-4.7656-4.7656a1.0677 1.0677 0 0 0-0.78516-0.3125z"></path>\n  </g>\n  <path d="m89.938 59.432v10.852c3.4258-0.39375 6.9291 0.9376 7.9922 4.6094 0.40346-0.21278 0.35849-0.19025 0.44531-0.23633 8.3721-3.8563 11.803 4.5742 8.5703 9.4219 4.2397 0.20726 6.1905 2.2386 6.7266 4.4609h5.375v-29.107zm8.6211 15.486c-65.706-49.945-32.853-24.973 0 0z"></path>\n  <path d="m91.104 71.066c-1.1528-0.01129-2.3479 0.19839-3.4434 0.61524-2.1909 0.83369-3.8886 2.4144-4.3047 4.4219-0.41608 2.0074 0.34439 4.7108 3.793 8.0312a1.071 1.071 0 0 1 0.0293 1.5137 1.071 1.071 0 0 1-1.5137 0.0293c-1.2149-1.1697-2.1466-2.3208-2.8555-3.4453-4.7346-1.035-7.5122 0.63769-8.7578 3.0234-1.2206 2.3379-0.85898 5.4819 1.291 7.7988h36.109c0.84689-0.74667 1.5903-2.6029 1.1738-4.2891-0.41806-1.6926-1.724-3.2474-5.1953-3.5625-0.95461 1.2047-2.2927 2.1692-4.041 2.6699a1.071 1.071 0 0 1-1.3242-0.73438 1.071 1.071 0 0 1 0.73438-1.3242c1.4086-0.40342 2.4445-1.1778 3.1465-2.1387a1.071 1.071 0 0 1 0.2461-0.36523c1e-3 -2e-3 3e-3 -0.0039 4e-3 -0.0059 0.92582-1.506 1.1077-3.3797 0.65625-5.0039-0.3953-1.4223-1.2601-2.5773-2.5371-3.1543-1.2102-0.54682-2.8829-0.61578-5.123 0.33008 0.12671 0.75629 0.18427 1.5621 0.12695 2.4375a1.071 1.071 0 0 1-1.1387 0.99805 1.071 1.071 0 0 1-0.99805-1.1387c0.21826-3.3336-1.0422-5.0613-2.8906-5.9961-0.92423-0.46739-2.0347-0.69965-3.1875-0.71094z"></path>\n  <path d="m86.346 96.055a1.071 1.071 0 0 0-0.87891 0.53516l-2.5059 4.3398a1.0711 1.0711 0 0 0 0.73242 1.5879l1.8926 0.35156-3.3848 5.8613a1.071 1.071 0 0 0 0.39258 1.4629 1.071 1.071 0 0 0 1.4629-0.39258l4.1406-7.1719a1.0711 1.0711 0 0 0-0.73242-1.5879l-1.8906-0.35157 1.748-3.0293a1.071 1.071 0 0 0-0.39258-1.4629 1.071 1.071 0 0 0-0.58398-0.14258z"></path>\n  <path d="m101.81 96.055a1.071 1.071 0 0 0-0.8789 0.53516l-2.5059 4.3398a1.0711 1.0711 0 0 0 0.73242 1.5879l1.8926 0.35156-3.3848 5.8613a1.071 1.071 0 0 0 0.39258 1.4629 1.071 1.071 0 0 0 1.4629-0.39258l4.1406-7.1719a1.0711 1.0711 0 0 0-0.73243-1.5879l-1.8906-0.35157 1.748-3.0293a1.071 1.071 0 0 0-0.39258-1.4629 1.071 1.071 0 0 0-0.58399-0.14258z"></path>\n </g>\n'}class qt extends c.exports.Control{constructor(e){super(Object.assign(e,{position:"topcenter"})),c.exports.Util.setOptions(this,e)}onAdd(){const e=!this.options.showTimeOfDay&&!this.options.showWeather&&this.options.showDigitalClock,t=De().state.currentWorldState;return this._container=c.exports.DomUtil.create("div","clock"+(e?" clock--digital":"")),this._sun=c.exports.DomUtil.create("div","clock__sun",this._container),this._moon=c.exports.DomUtil.create("div","clock__moon",this._container),this._sun.style.transform="translate(-150px, -150px)",this._moon.style.transform="translate(-150px, -150px)",this._sun.innerHTML='\n\t\t<svg class="svg-icon" aria-hidden="true">\n\t  \t\t<use xlink:href="#icon--clock_sun" />\n\t\t</svg>',this._moon.innerHTML='\n\t\t<svg class="svg-icon" aria-hidden="true">\n\t  \t\t<use xlink:href="#icon--clock_moon" />\n\t\t</svg>',this.options.showDigitalClock&&(this._clock=c.exports.DomUtil.create("div","clock__time",this._container)),this._unwatchHandler=h(t,(e=>{this._update(e)}),{deep:!0}),this._container}onRemove(){this._unwatchHandler&&this._unwatchHandler()}_update(e){const t=e.timeOfDay;let a;if(t>23100||t<12900){let e=t+900;e=e>=24e3?e-24e3:e,a=e/27600*2*Math.PI}else{const e=t-12900;a=Math.PI+e/20400*2*Math.PI}const o=a+Math.PI;t>=0?(this._sun.style.transform="translate("+Math.round(-50*Math.cos(a))+"px, "+Math.round(-50*Math.sin(a))+"px)",this._moon.style.transform="translate("+Math.round(-50*Math.cos(o))+"px, "+Math.round(-50*Math.sin(o))+"px)"):(this._sun.style.transform="translate(-150px, -150px)",this._moon.style.transform="translate(-150px, -150px)");const n=ve(t);this.options.showDigitalClock&&(t>=0?(this._clock.classList.remove(n.night?"day":"night"),this._clock.classList.add(n.day?"day":"night"),this._clock.textContent=[n.hours.toString().padStart(2,"0"),n.minutes.toString().padStart(2,"0")].join(":")):(this._clock.classList.remove(n.night?"day":"night"),this._clock.textContent="")),this.options.showWeather&&(e.thundering?(this._setSunIcon("clock_sun_storm"),this._setMoonIcon("clock_moon_storm")):e.raining?(this._setSunIcon("clock_sun_rain"),this._setMoonIcon("clock_moon_rain")):(this._setSunIcon("clock_sun"),this._setMoonIcon("clock_moon")))}_setSunIcon(e){this._sun&&this._currentSunIcon!==e&&(this._sun.innerHTML=`\n\t\t\t\t<svg class="svg-icon" aria-hidden="true">\n\t\t\t\t\t<use xlink:href="#icon--${e}" />\n\t\t\t\t</svg>`,this._currentSunIcon=e)}_setMoonIcon(e){this._moon&&this._currentMoonIcon!==e&&(this._moon.innerHTML=`\n\t\t\t\t<svg class="svg-icon" aria-hidden="true">\n\t\t\t\t\t<use xlink:href="#icon--${e}" />\n\t\t\t\t</svg>`,this._currentMoonIcon=e)}}var Vt=p({props:{leaflet:{type:Object,required:!0}},setup(e){const t=De(),a=m((()=>t.state.components.clockControl));let o=new qt(a.value);h(a,(t=>{e.leaflet.removeControl(o),t&&(o=new qt(t),e.leaflet.addControl(o))}),{deep:!0}),y((()=>e.leaflet.addControl(o))),u((()=>e.leaflet.removeControl(o)))},render:()=>null});let Kt=document.getElementById("icon--link"),Yt=document.getElementById("svg-sprite-component-wrap");if(Yt||(Yt=document.createElementNS("http://www.w3.org/2000/svg","svg"),Yt.id="svg-sprite-component-wrap",Yt.style.setProperty("display","none"),document.body.appendChild(Yt)),!Kt){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Yt.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 285.6 282"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--link"),e.innerHTML='\n <g transform="matrix(.1 0 0 -.1 -1.2664 284)">\n  <path d="m2268 2793c-129.4-120.47-255.09-244.29-358-343-417-399-408-389-395-460 8-41 26-76 78-147 20-29 37-58 37-65 0-12-96-106-451-445-87-83-109-95-138-69-41 35-135 76-178 76-44 0-68-16-168-115-11-11-139-135-285-274-417-400-409-391-391-472 21-94 177-283 301-364 108-72 159-95 207-95 44 0 68 16 168 115 11 11 139 135 285 275 417 399 408 389 395 460-8 41-26 76-77 147-21 29-38 58-38 65 0 12 96 106 451 446 87 82 109 94 138 68 41-35 135-76 178-76 44 0 68 16 168 115 11 11 133 128 270 260 138 132 283 272 323 312 71.696 68.453 78.039 68.992 80.636 139.67 0.4643 66.131-2.7476 64.888-21.636 98.334-116 195-360 395-484 395-38 0-50-6-95-47zm203-162c41-27 97-73 125-102 56-59 124-152 124-170 0-7-15-26-33-43-17-17-149-143-292-281-143-137-285-274-315-302-30-29-62-53-70-53-26 0-80 39-80 58 0 10 15 33 34 51s42 51 52 72c22.424 53.049-10.086 98.981-27.429 111.71-20.983 15.405-60.028 30.376-94.571 13.286-20-9-58-35-85-58-27-22-54-38-62-35-16 6-77 92-77 109 0 6 15 25 33 42 17 17 149 144 292 281 143 138 285 274 315 302 30 29 62 53 71 53s50-22 90-49zm-1552-1465c15-8 33-22 41-31 11-13 9-20-12-43-68-73-77-130-30-175 44-42 95-38 156 13 27 23 56 40 64 38 18-3 80-86 81-107 1-8-14-28-32-45-204.92-195.85-375.99-363.65-592-569-38-37-77-67-86-67-27 0-160 94-215 151-56 59-124 152-124 170 0 7 15 26 33 43 211.51 201.63 383.24 373.31 607 583 60 57 67 60 109 39z"></path>\n </g>\n'}class Qt extends c.exports.Control{constructor(e){super(e)}onAdd(){const e=De(),t=c.exports.DomUtil.create("button","leaflet-control-link"),a=m((()=>e.state.messages.copyToClipboardSuccess)),o=m((()=>e.state.messages.copyToClipboardError));return t.type="button",t.title=De().state.messages.linkTitle,t.innerHTML='\n\t\t<svg class="svg-icon" aria-hidden="true">\n\t\t  <use xlink:href="#icon--link" />\n\t\t</svg>',t.addEventListener("click",(e=>{e.preventDefault(),L(window.location.href.split("#")[0]+De().getters.url).then((()=>{k(a.value)})).catch((e=>{k({type:"error",text:o.value}),console.error("Error copying to clipboard",e)}))})),t}}var Jt=p({props:{leaflet:{type:Object,required:!0}},setup(e){const t=new Qt({position:"bottomleft"});y((()=>e.leaflet.addControl(t))),u((()=>e.leaflet.removeControl(t)))},render:()=>null});let Xt=document.getElementById("icon--chat"),ea=document.getElementById("svg-sprite-component-wrap");if(ea||(ea=document.createElementNS("http://www.w3.org/2000/svg","svg"),ea.id="svg-sprite-component-wrap",ea.style.setProperty("display","none"),document.body.appendChild(ea)),!Xt){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");ea.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 255.35 204.89"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--chat"),e.innerHTML='\n <g transform="translate(-2.1211 -27.577)" stroke-width="0">\n  <path transform="scale(.75)" d="m84.5 36.77c-45.246 0-81.672 36.424-81.672 81.67v56.217c0 45.246 36.426 81.67 81.672 81.67h177.13c45.246 0 81.672-36.424 81.672-81.67v-56.217c0-45.246-36.426-81.67-81.672-81.67zm0.07031 107.41a23.375 23.375 0 0 1 0.12695 0 23.375 23.375 0 0 1 23.375 23.375 23.375 23.375 0 0 1-23.375 23.375 23.375 23.375 0 0 1-23.375-23.375 23.375 23.375 0 0 1 23.248-23.375zm90.25 0a23.375 23.375 0 0 1 0.12696 0 23.375 23.375 0 0 1 23.375 23.375 23.375 23.375 0 0 1-23.375 23.375 23.375 23.375 0 0 1-23.375-23.375 23.375 23.375 0 0 1 23.248-23.375zm90.312 0a23.375 23.375 0 0 1 0.12696 0 23.375 23.375 0 0 1 23.375 23.375 23.375 23.375 0 0 1-23.375 23.375 23.375 23.375 0 0 1-23.375-23.375 23.375 23.375 0 0 1 23.248-23.375z"></path>\n  <path d="m84.929 180.81-27.39 49.754c-0.45922 1.8202 0.23674 2.7233 3.9555 0.91854 18.017-8.7437 98.169-50.072 98.169-50.072"></path>\n </g>\n'}class ta extends c.exports.Control{constructor(e){super(e)}onAdd(){const e=De(),t=c.exports.DomUtil.create("button","leaflet-control-chat");return t.type="button",t.title=e.state.messages.chatTitle,t.innerHTML='\n\t\t<svg class="svg-icon">\n\t\t  <use xlink:href="#icon--chat" />\n\t\t</svg>',t.addEventListener("click",(t=>{e.commit(Pe.TOGGLE_UI_ELEMENT_VISIBILITY,"chat"),t.stopPropagation(),t.preventDefault()})),c.exports.DomEvent.on(t,"keydown",(t=>{"ArrowRight"===t.key&&e.commit(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"chat",state:!0})})),h(e.state.ui.visibleElements,(e=>{t.setAttribute("aria-expanded",e.has("chat").toString())})),t}}var aa=p({props:{leaflet:{type:Object,required:!0}},setup(e){const t=new ta({position:"topleft"});y((()=>e.leaflet.addControl(t))),u((()=>e.leaflet.removeControl(t)))},render:()=>null});class oa extends c.exports.Control{constructor(e){super(e)}onAdd(){const e=c.exports.DomUtil.create("div","leaflet-control-logo");let t;if(this.options.url&&(t=c.exports.DomUtil.create("a","",e),t.href=this.options.url,t.setAttribute("aria-label",this.options.text)),this.options.image){const e=c.exports.DomUtil.create("img","",t);e.src=this.options.image,e.alt=this.options.text}else e.textContent=this.options.text;return e}}var na=p({props:{options:{type:Object,required:!0},leaflet:{type:Object,required:!0}},setup:e=>({control:new oa(e.options)}),mounted(){this.leaflet.addControl(this.control)},unmounted(){this.leaflet.removeControl(this.control)},render:()=>null});na.__scopeId="data-v-e381d884";let sa=document.getElementById("icon--layers"),ra=document.getElementById("svg-sprite-component-wrap");if(ra||(ra=document.createElementNS("http://www.w3.org/2000/svg","svg"),ra.id="svg-sprite-component-wrap",ra.style.setProperty("display","none"),document.body.appendChild(ra)),!sa){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");ra.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 234.46 247.78"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--layers"),e.innerHTML='\n <g transform="translate(-1.4842 -5.1001)" display="none" opacity=".4359">\n  <g transform="matrix(.1 0 0 -.1 -19.302 274)">\n   <path d="m1304 2698c-321.74-212.65-570.07-398.86-864-593-172-113-230-164-229-199 0-14 19-33 59-59 352.4-243.98 654.58-453.83 965-670 147-103 153-103 300 0 330.8 235.85 579.68 395.95 889 619 66 46 124 85 129 87 17 5-1 54-31 84-140.63 113.6-280.58 189.5-432 303-160.81 119.08-316.82 207.69-480 330-83 63-207 140-225 140-6 0-42-19-81-42z"></path>\n   <path d="m316.49 1122.3c-38.242-24.263-66.495-49.263-106.49-99.263-35-44-33.508-49.018 179.49-190.02 161.84-106.35 381.68-279.63 530.51-377.98 91-60 199-134 240-165 203.21-141.79 207-140 225-140s33.914 3.2589 225 140c41 31 149 105 240 165s190 128 221 151c30 23 140 99 244 169 164.73 121.85 202.25 148.6 245 192 13 16 13 40 0 56-59 73-140 130-170 119-321.31-201.8-453.83-311.32-816.06-555.46-122.9-90.805-120.43-94.286-179.87-94.119-51.23 0.73595-51.001-0.554-131.07 54.576-126.79 87.301-453 309-703 478-196.49 127.83-192.93 135.29-243.51 97.263z"></path>\n  </g>\n  <path d="m12.348 114.09c-3.8242 2.4263-6.6495 4.9263-10.649 9.9263-3.5 4.4-3.3508 4.9018 17.949 19.002 16.184 10.635 38.168 27.963 53.051 37.798 9.1 6 19.9 13.4 24 16.5 20.321 14.179 20.7 14 22.5 14s3.3914-0.32589 22.5-14c4.1-3.1 14.9-10.5 24-16.5 9.1-6 19-12.8 22.1-15.1 3-2.3 14-9.9 24.4-16.9 16.473-12.185 20.225-14.86 24.5-19.2 1.3-1.6 1.3-4 0-5.6-5.9-7.3-14-13-17-11.9-32.131 20.18-45.383 31.132-81.606 55.546-12.29 9.0805-12.043 9.4286-17.987 9.4119-5.123-0.0736-5.1001 0.0554-13.107-5.4576-12.679-8.7301-45.3-30.9-70.3-47.8-19.649-12.783-19.293-13.529-24.351-9.7263z" stroke-width=".1"></path>\n </g>\n <g transform="translate(-1.4842 -5.1001)">\n  <path transform="matrix(.81841 .57463 -.84426 .53593 0 0)" d="m83.736-75.689h122.5c5.4252 0 9.7928 4.3676 9.7928 9.7928v131.66c0 5.4252-4.3676 9.7928-9.7928 9.7928h-122.5c-5.4252 0-9.7928-4.3676-9.7928-9.7928v-131.66c0-5.4252 4.3676-9.7928 9.7928-9.7928z"></path>\n  <path transform="scale(.75)" d="m292.44 213.33-130.74 82.99c-6.1071 3.8767-15.791 3.6508-21.711-0.50586l-115.86-81.352-17.471 11.09c-6.1071 3.8767-6.258 10.343-0.33789 14.5l133.67 93.857c5.9201 4.1567 15.604 4.3806 21.711 0.50391l148.21-94.078c6.1071-3.8767 6.258-10.345 0.33789-14.502z"></path>\n  <path transform="scale(.75)" d="m292.44 152.38-130.73 82.988c-6.1071 3.8767-15.791 3.6508-21.711-0.50585l-115.86-81.352-17.471 11.09c-6.1071 3.8767-6.258 10.345-0.33789 14.502l133.67 93.855c5.9201 4.1567 15.604 4.3826 21.711 0.50586l148.21-94.08c6.1071-3.8767 6.258-10.343 0.33789-14.5z"></path>\n </g>\n'}let ia=document.getElementById("icon--checkbox"),la=document.getElementById("svg-sprite-component-wrap");if(la||(la=document.createElementNS("http://www.w3.org/2000/svg","svg"),la.id="svg-sprite-component-wrap",la.style.setProperty("display","none"),document.body.appendChild(la)),!ia){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");la.appendChild(e),e.setAttribute("version","1.1"),e.setAttribute("viewBox","0 0 105.15 95.879"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--checkbox"),e.innerHTML='\n <g transform="translate(-43.246 -132.45)">\n  <path id="tick" d="m140.26 147.26-48.793 48.793-21.674-21.674-9.1914 9.1934 30.865 30.865 57.984-57.986z" stroke="#222222" stroke-width="6"></path>\n </g>\n'}const ca=new Set(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Home","End"]),da=(e,t)=>{if(e.target)if(ca.has(e.key)){const a=t.indexOf(e.target);if(a<0)return;let o=a;switch(e.key){case"ArrowUp":case"ArrowLeft":o=a-1;break;case"ArrowDown":case"ArrowRight":o=a+1;break;case"Home":o=0;break;case"End":o=t.length-1}o<0?o=t.length-1:o>=t.length&&(o=0),t[o].focus(),e.preventDefault()}else if("Enter"===e.key&&e.target){const t=new MouseEvent("click",{ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,metaKey:e.metaKey,altKey:e.altKey,bubbles:!0});e.target.dispatchEvent(t),e.preventDefault()}};c.exports.Control.LayersObject,c.exports.Control.LayersOptions;const pa=c.exports.Control.Layers,ma=De();class ha extends c.exports.Control.Layers{constructor(e,t,a){super(e,t,Object.assign(a,{sortLayers:!0,sortFunction:(e,t,a,o)=>{const n=this._layerPositions.get(e)||0,s=this._layerPositions.get(t)||0;return n!==s?n-s:a<o?-1:a>o?1:0}})),this.visible=!1,this._layerPositions=new Map}hasLayer(e){return!!super._getLayer(c.exports.Util.stamp(e))}expand(){this._layersButton.setAttribute("aria-expanded","true"),this._section.style.display="",this.handleResize();const e=this._container.querySelector("input");return e&&e.focus(),super._checkDisabledLayers(),this}collapse(){return this._layersButton.setAttribute("aria-expanded","false"),this._section.style.display="none",this}_initLayout(){const e="leaflet-control-layers",t=this._container=c.exports.DomUtil.create("div",e),a=this._section=c.exports.DomUtil.create("section",e+"-list"),o=this._layersButton=c.exports.DomUtil.create("button",e+"-toggle",t);c.exports.DomEvent.disableClickPropagation(t),c.exports.DomEvent.disableScrollPropagation(t),c.exports.DomEvent.on(o,"keydown",(e=>{"ArrowRight"===e.key&&ma.commit(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"layers",state:!0})})),c.exports.DomEvent.on(t,"keydown",(e=>{"ArrowLeft"===e.key&&(e.preventDefault(),ma.commit(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"layers",state:!1}),T((()=>o.focus())));const a=Array.from(t.querySelectorAll("input"));da(e,a)})),c.exports.DomEvent.on(o,"click",(()=>ma.commit(Pe.TOGGLE_UI_ELEMENT_VISIBILITY,"layers"))),a.style.display="none",o.title=ma.state.messages.layersTitle,o.setAttribute("aria-expanded","false"),o.innerHTML='\n\t\t\t<svg class="svg-icon" aria-hidden="true">\n\t\t\t  <use xlink:href="#icon--layers" />\n\t\t\t</svg>',h(ma.state.ui.visibleElements,(e=>{e.has("layers")&&!this.visible?this.expand():this.visible&&!e.has("layers")&&this.collapse(),this.visible=ma.state.ui.visibleElements.has("layers")})),h(ma.state.messages,(e=>o.title=e.layersTitle)),this.visible=ma.state.ui.visibleElements.has("layers"),this.visible&&this.expand(),this._baseLayersList=c.exports.DomUtil.create("div",e+"-base",a),this._separator=c.exports.DomUtil.create("div",e+"-separator",a),this._overlaysList=c.exports.DomUtil.create("div",e+"-overlays",a),t.appendChild(a),window.addEventListener("resize",(()=>this.handleResize())),this.handleResize()}handleResize(){const e=this._layersButton.getBoundingClientRect().y;this._section.style.maxHeight=`calc(100vh - ${e+30+10+55}px)`}addOverlayAtPosition(e,t,a){return this._layerPositions.set(e,a),super.addOverlay(e,t)}addOverlay(e,t){return this._layerPositions.set(e,0),super.addOverlay(e,t)}removeLayer(e){return this._layerPositions.delete(e),super.removeLayer(e)}_addItem(e){const t=e.overlay?this._overlaysList:this._baseLayersList,a=document.createElement("label"),o=document.createElement("span"),n=this._map.hasLayer(e.layer);let s;return a.className="layer checkbox",e.overlay?(s=document.createElement("input"),s.type="checkbox",s.className="leaflet-control-layers-selector",s.defaultChecked=n):s=pa.prototype._createRadioElement.call(this,"leaflet-base-layers_"+c.exports.Util.stamp(this),n),s.layerId=c.exports.Util.stamp(e.layer),this._layerControlInputs.push(s),o.textContent=e.name,c.exports.DomEvent.on(s,"click",(e=>pa.prototype._onInputClick.call(this,e)),this),a.appendChild(s),a.insertAdjacentHTML("beforeend",'\n\t\t<svg class="svg-icon" aria-hidden="true">\n\t  \t\t<use xlink:href="#icon--checkbox" />\n\t\t</svg>'),a.appendChild(o),t.appendChild(a),pa.prototype._checkDisabledLayers.call(this),o}}class ua{constructor(e){const t=m((()=>De().state.configuration.showLayerControl));this.map=e,this.layerControl=new ha({},{},{position:"topleft"}),t.value&&this.map.addControl(this.layerControl),h(t,(e=>{e?this.map.addControl(this.layerControl):this.map.removeControl(this.layerControl)}))}addLayer(e,t,a,o){this.map.addLayer(e),t&&(this.layerControl.hasLayer(e)&&this.layerControl.removeLayer(e),void 0!==o?this.layerControl.addOverlayAtPosition(e,a,o):this.layerControl.addOverlay(e,a))}addHiddenLayer(e,t,a){this.layerControl.hasLayer(e)&&this.layerControl.removeLayer(e),void 0!==a?this.layerControl.addOverlayAtPosition(e,t,a):this.layerControl.addOverlay(e,t)}removeLayer(e){this.map.removeLayer(e),this.layerControl.removeLayer(e)}}class ga extends c.exports.Map{constructor(e,t){super(e,t),this._layerManager=Object.seal(new ua(this))}getLayerManager(){return this._layerManager}_initControlPos(){const e=this._controlCorners={},t="leaflet-",a=this._controlContainer=c.exports.DomUtil.create("div",t+"control-container",this._container);function o(o,n){const s=t+o+" "+t+n;e[`${o}${n}`]=c.exports.DomUtil.create("div",s,a)}o("top","left"),o("top","right"),o("top","center"),o("bottom","center"),o("bottom","left"),o("bottom","right")}}let ya=document.getElementById("icon--loading"),wa=document.getElementById("svg-sprite-component-wrap");if(wa||(wa=document.createElementNS("http://www.w3.org/2000/svg","svg"),wa.id="svg-sprite-component-wrap",wa.style.setProperty("display","none"),document.body.appendChild(wa)),!ya){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");wa.appendChild(e),e.setAttribute("viewBox","0 0 38 38"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("stroke","#fff"),e.setAttribute("id","icon--loading"),e.innerHTML='\n    <g fill="none" fill-rule="evenodd">\n        <g transform="translate(1 1)" stroke-width="2">\n            <circle stroke-opacity=".5" cx="18" cy="18" r="18"></circle>\n            <path d="M36 18c0-9.94-8.06-18-18-18">\n                <animatetransform attributeName="transform" type="rotate" from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite"></animatetransform>\n            </path>\n        </g>\n    </g>\n'}class va extends c.exports.Control{constructor(e){super(e),this._dataLoaders=new Set,this._loadingIndicator=c.exports.DomUtil.create("div","leaflet-control-loading")}onAdd(e){return this._loadingIndicator.title=De().state.messages.loadingTitle,this._loadingIndicator.hidden=!0,this._loadingIndicator.innerHTML='\n\t\t<svg class="svg-icon">\n\t\t  <use xlink:href="#icon--loading" />\n\t\t</svg>',this._addLayerListeners(e),this._addMapListeners(e),this._loadingIndicator}onRemove(e){this._removeLayerListeners(e),this._removeMapListeners(e)}addLoader(e){this._dataLoaders.add(e),this.options.delayIndicator&&!this._delayIndicatorTimeout?this._delayIndicatorTimeout=setTimeout((()=>{this.updateIndicator(),this._delayIndicatorTimeout=void 0}),this.options.delayIndicator):this.updateIndicator()}removeLoader(e){this._dataLoaders.delete(e),this.updateIndicator(),this.options.delayIndicator&&this._delayIndicatorTimeout&&!this.isLoading()&&(clearTimeout(this._delayIndicatorTimeout),this._delayIndicatorTimeout=void 0)}updateIndicator(){this.isLoading()?this._showIndicator():this._hideIndicator()}isLoading(){return this._countLoaders()>0}_countLoaders(){return this._dataLoaders.size}_showIndicator(){this._loadingIndicator.hidden=!1}_hideIndicator(){this._loadingIndicator.hidden=!0}_handleLoading(e){this.addLoader(this.getEventId(e))}_handleBaseLayerChange(e){e.layer&&e.layer.eachLayer&&"function"==typeof e.layer.eachLayer&&e.layer.eachLayer((e=>{this._handleBaseLayerChange({layer:e})}))}_handleLoad(e){this.removeLoader(this.getEventId(e))}getEventId(e){return e.id?e.id:e.layer?e.layer._leaflet_id:e.target._leaflet_id}_layerAdd(e){if(e.layer instanceof c.exports.TileLayer)try{e.layer.isLoading()&&this.addLoader(e.layer._leaflet_id),e.layer.on("loading",this._handleLoading,this),e.layer.on("load",this._handleLoad,this)}catch(t){console.warn("L.Control.Loading: Tried and failed to add  event handlers to layer",e.layer),console.warn("L.Control.Loading: Full details",t)}}_layerRemove(e){if(e.layer instanceof c.exports.TileLayer)try{e.layer.off("loading",this._handleLoading,this),e.layer.off("load",this._handleLoad,this)}catch(t){console.warn("L.Control.Loading: Tried and failed to remove event handlers from layer",e.layer),console.warn("L.Control.Loading: Full details",t)}}_addLayerListeners(e){e.eachLayer((e=>{e instanceof c.exports.TileLayer&&(e.isLoading()&&this.addLoader(e._leaflet_id),e.on("loading",this._handleLoading,this),e.on("load",this._handleLoad,this))})),e.on("layeradd",this._layerAdd,this),e.on("layerremove",this._layerRemove,this)}_removeLayerListeners(e){e.eachLayer((e=>{e instanceof c.exports.TileLayer&&(this.removeLoader(e._leaflet_id),e.off("loading",this._handleLoading,this),e.off("load",this._handleLoad,this))})),e.off("layeradd",this._layerAdd,this),e.off("layerremove",this._layerRemove,this)}_addMapListeners(e){e.on("baselayerchange",this._handleBaseLayerChange,this),e.on("dataloading",this._handleLoading,this),e.on("dataload",this._handleLoad,this),e.on("layerremove",this._handleLoad,this)}_removeMapListeners(e){e.off("baselayerchange",this._handleBaseLayerChange,this),e.off("dataloading",this._handleLoading,this),e.off("dataload",this._handleLoad,this),e.off("layerremove",this._handleLoad,this)}}const _a={name:"svg-icon",props:{name:{type:String,required:!0},title:{type:String,default:null}},computed:{iconPath(){return`#icon--${this.name}`},className(){return"svg-icon svg-icon--"+this.name}}},fa={key:0};_a.render=function(e,t,a,o,n,s){return E(),w("svg",{class:s.className,xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},[a.title?(E(),w("title",fa,A(a.title),1)):C("",!0),b("use",{"xlink:href":s.iconPath},null,8,["xlink:href"])],2)};let Ea=document.getElementById("icon--block_world_surface"),ba=document.getElementById("svg-sprite-component-wrap");if(ba||(ba=document.createElementNS("http://www.w3.org/2000/svg","svg"),ba.id="svg-sprite-component-wrap",ba.style.setProperty("display","none"),document.body.appendChild(ba)),!Ea){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");ba.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_world_surface"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#66a443" stroke="#66a443" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#77b551" stroke="#77b551"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#468234" stroke="#468234"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#549141" stroke="#549141"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#3b823b" stroke="#3b823b"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#2c722d" stroke="#2c722d"></path>\n  </g>\n </g>\n'}let Sa=document.getElementById("icon--block_world_cave"),La=document.getElementById("svg-sprite-component-wrap");if(La||(La=document.createElementNS("http://www.w3.org/2000/svg","svg"),La.id="svg-sprite-component-wrap",La.style.setProperty("display","none"),document.body.appendChild(La)),!Sa){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");La.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_world_cave"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#61585b" stroke="#61585b" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#9ba2a3" stroke="#9ba2a3"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#776d70" stroke="#776d70"></path>\n   <path d="m138.54 251.12 1e-4 -70.363-5e-5 -19.867-107.11 50.843z" fill="#7b777e" stroke="#7b777e"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#67656a" stroke="#67656a"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#84858b" stroke="#84858b"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#838e90" stroke="#838e90"></path>\n  </g>\n </g>\n'}let ka=document.getElementById("icon--block_world_biome"),Ta=document.getElementById("svg-sprite-component-wrap");if(Ta||(Ta=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ta.id="svg-sprite-component-wrap",Ta.style.setProperty("display","none"),document.body.appendChild(Ta)),!ka){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ta.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_world_biome"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#2c8ed9" stroke="#2c8ed9" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#46c0f1" stroke="#46c0f1"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#ea952b" stroke="#ea952b"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#e15915" stroke="#e15915"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#b5279f" stroke="#b5279f"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#94116a" stroke="#94116a"></path>\n  </g>\n </g>\n'}let Aa=document.getElementById("icon--block_world_flat"),Ca=document.getElementById("svg-sprite-component-wrap");if(Ca||(Ca=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ca.id="svg-sprite-component-wrap",Ca.style.setProperty("display","none"),document.body.appendChild(Ca)),!Aa){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ca.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 224.88 224.88"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_world_flat"),e.innerHTML='\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="#56bc3a" stroke-width="0"></rect>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m62.314 231.96h145.41c7.492 0 13.523-6.0314 13.523-13.523v-131.46c-109.53-19.382-158.93 144.98-158.93 144.98z" fill="#36c1df" stroke-width="0"></path>\n </g>\n <g opacity=".33548">\n  <path d="m173.19 92.012c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.696-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69479 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#dece95" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m171.44 100.97c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.695-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69478 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#dece95" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="none" stroke="#437c33" stroke-width="15"></rect>\n </g>\n'}let xa=document.getElementById("icon--block_nether_flat"),Pa=document.getElementById("svg-sprite-component-wrap");if(Pa||(Pa=document.createElementNS("http://www.w3.org/2000/svg","svg"),Pa.id="svg-sprite-component-wrap",Pa.style.setProperty("display","none"),document.body.appendChild(Pa)),!xa){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Pa.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 224.88 224.88"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_nether_flat"),e.innerHTML='\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="#443937" stroke-width="0"></rect>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m62.314 231.96h145.41c7.492 0 13.523-6.0314 13.523-13.523v-131.46c-109.53-19.382-158.93 144.98-158.93 144.98z" fill="#dc6725" stroke-width="0"></path>\n </g>\n <g opacity=".33548">\n  <path d="m173.19 92.012c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.696-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69479 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#932626" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m171.44 100.97c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.695-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69478 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#932626" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="none" stroke="#532727" stroke-width="15"></rect>\n </g>\n'}let Ma=document.getElementById("icon--block_nether_surface"),Ia=document.getElementById("svg-sprite-component-wrap");if(Ia||(Ia=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ia.id="svg-sprite-component-wrap",Ia.style.setProperty("display","none"),document.body.appendChild(Ia)),!Ma){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ia.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_nether_surface"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#ca2717" stroke="#ca2717" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#dc442b" stroke="#dc442b"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#9d0a17" stroke="#9d0a17"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#b02222" stroke="#b02222"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#9b212d" stroke="#9b212d"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#8a0822" stroke="#8a0822"></path>\n  </g>\n </g>\n'}let za=document.getElementById("icon--block_the_end_flat"),Ua=document.getElementById("svg-sprite-component-wrap");if(Ua||(Ua=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ua.id="svg-sprite-component-wrap",Ua.style.setProperty("display","none"),document.body.appendChild(Ua)),!za){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ua.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 224.88 224.88"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_the_end_flat"),e.innerHTML='\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="#bfbd7a" stroke-width="0"></rect>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m62.314 231.96h145.41c7.492 0 13.523-6.0314 13.523-13.523v-131.46c-109.53-19.382-158.93 144.98-158.93 144.98z" fill="#0c0902" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m171.44 100.97c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.695-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69478 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#e6eca4" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="none" stroke="#534427" stroke-width="15"></rect>\n </g>\n'}let Ra=document.getElementById("icon--block_the_end_surface"),Oa=document.getElementById("svg-sprite-component-wrap");if(Oa||(Oa=document.createElementNS("http://www.w3.org/2000/svg","svg"),Oa.id="svg-sprite-component-wrap",Oa.style.setProperty("display","none"),document.body.appendChild(Oa)),!Ra){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Oa.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_the_end_surface"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#cdc683" stroke="#cdc683" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#e1e5ab" stroke="#e1e5ab"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#b8b372" stroke="#b8b372"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#cdc683" stroke="#cdc683"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#b4a665" stroke="#b4a665"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#908046" stroke="#908046"></path>\n  </g>\n </g>\n'}let Na=document.getElementById("icon--block_other"),Da=document.getElementById("svg-sprite-component-wrap");if(Da||(Da=document.createElementNS("http://www.w3.org/2000/svg","svg"),Da.id="svg-sprite-component-wrap",Da.style.setProperty("display","none"),document.body.appendChild(Da)),!Na){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Da.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_other"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#5e6464" stroke="#5e6464" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#929594" stroke="#929594"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#525252" stroke="#525252"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#696969" stroke="#696969"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#555356" stroke="#555356"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#3c373d" stroke="#3c373d"></path>\n  </g>\n </g>\n'}let Ha=document.getElementById("icon--block_other_flat"),Ba=document.getElementById("svg-sprite-component-wrap");if(Ba||(Ba=document.createElementNS("http://www.w3.org/2000/svg","svg"),Ba.id="svg-sprite-component-wrap",Ba.style.setProperty("display","none"),document.body.appendChild(Ba)),!Ha){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Ba.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 224.88 224.88"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_other_flat"),e.innerHTML='\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="#4c4b51" stroke-width="0"></rect>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m62.314 231.96h145.41c7.492 0 13.523-6.0314 13.523-13.523v-131.46c-109.53-19.382-158.93 144.98-158.93 144.98z" fill="#332f2e" stroke-width="0"></path>\n </g>\n <g opacity=".33548">\n  <path d="m173.19 92.012c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.696-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69479 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#6a7072" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <path d="m171.44 100.97c-2.9871 6.581 23.116 21.259 7.8689 36.129-18.502 16.613 8.5594 36.592-21.823 51.472-16.422 4.7817-43.518-38.241-47.51-10.136-2.6715 36.879-43.356 18.551-16.493 53.526h-47.213c-4.7692-46.459 15.402-83.567 38.889-91.661 63.695-21.95 27.812-40.803 67.037-69.23 24.344-20.731 39.502-33.812 69.051-22.989l-0.69478 39.645c-15.225 10.522-44.572 3.2388-49.113 13.244z" fill="#6a7072" stroke-width="0"></path>\n </g>\n <g transform="translate(-3.8659 -14.578)">\n  <rect x="11.366" y="22.078" width="209.88" height="209.88" ry="13.523" fill="none" stroke="#13212c" stroke-width="15"></rect>\n </g>\n'}let $a=document.getElementById("icon--block_skylands"),ja=document.getElementById("svg-sprite-component-wrap");if(ja||(ja=document.createElementNS("http://www.w3.org/2000/svg","svg"),ja.id="svg-sprite-component-wrap",ja.style.setProperty("display","none"),document.body.appendChild(ja)),!$a){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");ja.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 232.45 263.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--block_skylands"),e.innerHTML='\n <g transform="translate(-22.273 -7.0247)">\n  <path d="m138.53 7.44-115.39 54.909 21.416 10.26 93.994-44.637 93.893 44.636 21.412-10.259z" fill="#5cd1e9" stroke="#5cd1e9" stroke-width=".75"></path>\n  <g stroke-width=".75px">\n   <path d="m138.53 117.26-93.894-44.651 93.912-44.634 93.717 44.623z" fill="#79edf4" stroke="#79edf4"></path>\n   <path d="m23.143 214.75v-152.4l21.345 10.226c0.05947 39.509 0.07066 86.343 0.08167 132.49l93.97 44.597-5e-5 19.867z" fill="#2076bf" stroke="#2076bf"></path>\n   <path d="m44.569 205.06 0.04767-132.43 93.923 44.642-3e-5 132.37z" fill="#34a7dc" stroke="#34a7dc"></path>\n   <path d="m232.5 205-0.044-132.39-93.913 44.674 1e-5 132.37z" fill="#005ec9" stroke="#005ec9"></path>\n   <path d="m232.51 72.577-0.013 132.42-93.957 44.64 3e-5 19.887 115.32-54.774v-152.4z" fill="#0043aa" stroke="#0043aa"></path>\n  </g>\n </g>\n'}var Za=p({name:"WorldListItem",components:{SvgIcon:_a},props:{world:{type:Object,required:!0},name:{type:String,default:"map"}},computed:{currentMap:{get(){const e=De();return e.state.currentMap?[e.state.currentWorld.name,e.state.currentMap.name]:void 0},set(e){De().commit(Pe.SET_CURRENT_MAP,{worldName:e[0],mapName:e[1]})}}},methods:{getMapIcon(e){let t,a;switch(this.world.dimension){case"nether":t="nether",a=["surface","nether"].includes(e.name)?"surface":"flat";break;case"end":t="the_end",a=["surface","the_end"].includes(e.name)?"surface":"flat";break;case"overworld":default:t="world",a=["surface","flat","biome","cave"].includes(e.name)?e.name:"flat"}return`block_${t}_${a}`}}});const Wa=S("data-v-08fc866a");x("data-v-08fc866a");const Ga={class:"world"},Fa={class:"world__name","aria-hidden":"true"},qa={class:"world__maps menu"};P();const Va=Wa(((e,t,a,o,n,s)=>{const r=f("SvgIcon");return E(),w("div",Ga,[b("span",Fa,A(e.world.title),1),b("div",qa,[(E(!0),w(_,null,v(e.world.maps,(([a,o])=>(E(),w(_,{key:`${e.world.name}_${a}`},[M(b("input",{id:`${e.name}-${e.world.name}-${a}`,type:"radio",name:e.name,value:[e.world.name,o.name],"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentMap=t),"aria-labelledby":`${e.name}-${e.world.name}-${a}-label`},null,8,["id","name","value","aria-labelledby"]),[[I,e.currentMap]]),b("label",{id:`${e.name}-${e.world.name}-${a}-label`,class:"map",for:`${e.name}-${e.world.name}-${a}`,title:`${e.world.title} - ${o.title}`},[b(r,{name:e.getMapIcon(o)},null,8,["name"])],8,["id","for","title"])],64)))),128))])])}));Za.render=Va,Za.__scopeId="data-v-08fc866a";var Ka=p({name:"MapContextMenu",components:{WorldListItem:Za},props:{leaflet:{type:Object,required:!0}},setup(e){const t=De(),a=g(null),o=g(null),n=m((()=>t.state.messages.contextMenuCopyLink)),s=m((()=>t.state.messages.contextMenuCenterHere)),r=m((()=>t.state.messages.copyToClipboardSuccess)),i=m((()=>t.state.messages.copyToClipboardError)),l=g(null),c=m((()=>!!a.value)),d=m((()=>t.state.currentProjection)),p=m((()=>t.state.currentWorld)),w=m((()=>t.state.currentMap)),v=m((()=>t.state.currentZoom)),_=m((()=>p.value?p.value.maps.size:0)),f=m((()=>a.value?d.value.latLngToLocation(a.value.latlng,64):{x:0,y:0,z:0})),E=m((()=>`X: ${Math.round(f.value.x)}, Z: ${Math.round(f.value.z)}`)),b=m((()=>`${Math.round(f.value.x)}, ${Math.round(f.value.z)}`)),S=m((()=>{if(!p.value||!w.value)return"";const e=new URL(window.location.href);return e.hash=Ae(p.value,w.value,f.value,v.value),e})),L=m((()=>{if(!a.value)return{visibility:"hidden",left:"-1000px"};return{transform:`translate(${Math.min(window.innerWidth-l.value.offsetWidth-10,a.value.originalEvent.clientX)}px, ${Math.min(window.innerHeight-l.value.offsetHeight-10,a.value.originalEvent.clientY)}px)`}})),A=e=>{"Escape"===e.key&&c.value&&C()},C=()=>a.value=null;return h(a,(t=>{t&&(e.leaflet.closePopup(),e.leaflet.closeTooltip(),T((()=>l.value&&(()=>{if(l.value){const e=l.value.querySelector("button");e&&e.focus()}})())))})),y((()=>{window.addEventListener("click",C),window.addEventListener("keyup",A)})),u((()=>{window.removeEventListener("click",C),window.removeEventListener("keyup",A)})),e.leaflet.on("movestart",C),e.leaflet.on("zoomstart",C),e.leaflet.on("contextmenu",(e=>{e.originalEvent.target&&e.originalEvent.target.closest(".leaflet-control")||(e.originalEvent.stopImmediatePropagation(),e.originalEvent.preventDefault(),a.value=e)})),e.leaflet.on("mousemove",(e=>{o.value=e})),window.addEventListener("contextmenu",(e=>{e.target&&e.target instanceof HTMLElement&&e.target.classList.contains("leaflet-zoom-animated")&&(e.preventDefault(),e.stopImmediatePropagation(),o.value&&(a.value=o.value))})),{messageCopyLink:n,messageCenterHere:s,copySuccess:()=>k(r.value),copyError:e=>{k({type:"error",text:i.value}),console.error("Error copying to clipboard",e)},menuVisible:c,menuElement:l,url:S,locationLabel:E,locationCopy:b,currentWorld:p,mapCount:_,style:L,pan:()=>{a.value&&(e.leaflet.panTo(a.value.latlng),e.leaflet.getContainer().focus())},handleKeydown:e=>{da(e,Array.from(l.value.querySelectorAll("button, input")))}}}});const Ya=S("data-v-43cc25b5");x("data-v-43cc25b5");const Qa={class:"menu",role:"menu"},Ja={role:"none"},Xa={type:"button",role:"menuitem"},eo={role:"none"},to={type:"button",role:"menuitem"},ao={role:"none"};P();const oo=Ya(((e,t,a,o,n,s)=>{const r=f("WorldListItem"),i=R("clipboard");return E(),w("nav",{role:"none",id:"map-context-menu",ref:"menuElement",style:e.style,onKeydown:t[2]||(t[2]=(...t)=>e.handleKeydown&&e.handleKeydown(...t))},[b("ul",Qa,[b("li",Ja,[M(b("button",Xa,[z(A(e.locationLabel),1)],512),[[i,e.locationCopy,"copy"],[i,e.copySuccess,"success"],[i,e.copyError,"error"]])]),b("li",eo,[M(b("button",to,[z(A(e.messageCopyLink),1)],512),[[i,e.url,"copy"],[i,e.copySuccess,"success"],[i,e.copyError,"error"]])]),b("li",ao,[b("button",{type:"button",role:"menuitem",onClick:t[1]||(t[1]=U(((...t)=>e.pan&&e.pan(...t)),["prevent"]))},A(e.messageCenterHere),1)]),e.currentWorld&&e.mapCount>1?(E(),w(r,{key:0,world:e.currentWorld,name:"context"},null,8,["world"])):C("",!0)])],36)}));Ka.render=oo,Ka.__scopeId="data-v-43cc25b5";var no=p({components:{MapContextMenu:Ka,MapLayer:Be,PlayersLayer:Ke,MarkerSetLayer:Pt,CoordinatesControl:Ut,ClockControl:Vt,LinkControl:Jt,ChatControl:aa,LogoControl:na},setup(){const e=De(),t=m((()=>e.state.maps)),a=m((()=>e.state.markerSets)),o=m((()=>e.state.configuration)),n=m((()=>e.getters.playerMarkersEnabled)),s=m((()=>e.getters.coordinatesControlEnabled)),r=m((()=>e.getters.clockControlEnabled)),i=m((()=>e.state.components.linkControl)),l=m((()=>e.state.components.chatBox)),c=m((()=>e.state.components.logoControls)),d=m((()=>e.state.currentWorld)),p=m((()=>e.state.currentMap)),h=m((()=>e.state.currentProjection)),u=m((()=>e.getters.mapBackground));return{leaflet:void 0,maps:t,markerSets:a,configuration:o,playerMarkersEnabled:n,coordinatesControlEnabled:s,clockControlEnabled:r,linkControlEnabled:i,chatBoxEnabled:l,logoControls:c,followTarget:m((()=>e.state.followTarget)),panTarget:m((()=>e.state.panTarget)),parsedUrl:m((()=>e.state.parsedUrl)),mapBackground:u,currentWorld:d,currentMap:p,currentProjection:h,scheduledPan:g(null),scheduledZoom:g(null),mapTitle:m((()=>e.state.messages.mapTitle))}},watch:{followTarget:{handler(e,t){e&&this.updateFollow(e,!t||e.account!==t.account)},deep:!0},panTarget(e){e&&(this.currentWorld&&e.location.world===this.currentWorld.name&&De().commit(Pe.CLEAR_PAN_TARGET,void 0),this.updateFollow(e,!1))},currentProjection(e,t){if(this.leaflet&&e&&t){const a=this.scheduledPan||t.latLngToLocation(this.leaflet.getCenter(),64);this.scheduledZoom&&this.leaflet.setZoom(this.scheduledZoom,{animate:!1}),this.leaflet.panTo(e.locationToLatLng(a),{animate:!1,noMoveStart:!0}),this.scheduledZoom=null,this.scheduledPan=null}},currentWorld(e,t){var a,o;const n=De();if(e){let s=this.scheduledPan;if(n.dispatch(Re.GET_MARKER_SETS,void 0),n.state.followTarget&&n.state.followTarget.location.world===e.name)return;if(n.state.panTarget&&n.state.panTarget.location.world===e.name)return void n.commit(Pe.CLEAR_PAN_TARGET,void 0);(null==(a=n.state.parsedUrl)?void 0:a.location)?(s=n.state.parsedUrl.location,n.commit(Pe.CLEAR_PARSED_URL,void 0)):s=e.center,t||(this.scheduledZoom=(null==(o=n.state.parsedUrl)?void 0:o.zoom)||n.state.configuration.defaultZoom),this.scheduledPan=s}},parsedUrl:{handler(e){if(e&&this.currentWorld&&this.leaflet)if(e.world!==this.currentWorld.name||e.map!==this.currentMap.name){this.scheduledPan=e.location,this.scheduledZoom=e.zoom;try{De().commit(Pe.SET_CURRENT_MAP,{worldName:e.world,mapName:e.map})}catch(t){console.warn("Failed to handle URL change",t),this.scheduledPan=null,this.scheduledZoom=null}}else this.scheduledPan=null,this.scheduledZoom=null,this.leaflet.setZoom(e.zoom,{animate:!1}),this.leaflet.panTo(this.currentProjection.locationToLatLng(e.location),{animate:!1,noMoveStart:!0})},deep:!0}},mounted(){this.leaflet=new ga(this.$el.nextElementSibling,Object.freeze({zoom:this.configuration.defaultZoom,center:new c.exports.LatLng(0,0),fadeAnimation:!1,zoomAnimation:!0,zoomControl:!0,preferCanvas:!0,attributionControl:!1,crs:c.exports.CRS.Simple,worldCopyJump:!1})),window.addEventListener("keydown",this.handleKeydown),this.leaflet.createPane("vectors"),this.leaflet.addControl(new va({position:"topleft",delayIndicator:500})),this.leaflet.on("moveend",(()=>{De().commit(Pe.SET_CURRENT_LOCATION,this.currentProjection.latLngToLocation(this.leaflet.getCenter(),64))})),this.leaflet.on("zoomend",(()=>{De().commit(Pe.SET_CURRENT_ZOOM,this.leaflet.getZoom())}))},unmounted(){window.removeEventListener("keydown",this.handleKeydown),this.leaflet.remove()},methods:{handleKeydown(e){"Escape"===e.key&&(e.preventDefault(),this.leaflet.getContainer().focus())},updateFollow(e,t){const a=De(),o=a.state.configuration.followMap,n=a.state.currentWorld;let s=null;if(!this.leaflet)return void console.warn(`Cannot follow ${e.account}. Map not yet initialized.`);if(e.hidden)return void console.warn(`Cannot follow ${e.account}. Player is hidden from the map.`);if(!e.location.world)return void console.warn(`Cannot follow ${e.account}. Player isn't in a known world.`);if(s=n&&n.name===e.location.world?n:a.state.worlds.get(e.location.world),!s)return void console.warn(`Cannot follow ${e.account}. Player isn't in a known world.`);let r=o&&s.maps.has(o)?s.maps.get(o):s.maps.entries().next().value[1];r===a.state.currentMap||s===n&&!t?(this.leaflet.panTo(a.state.currentProjection.locationToLatLng(e.location)),t&&(console.log(`Setting zoom for new follow ${a.state.configuration.followZoom}`),this.leaflet.setZoom(a.state.configuration.followZoom))):(this.scheduledPan=e.location,t&&(console.log(`Setting zoom for new follow ${a.state.configuration.followZoom}`),this.scheduledZoom=a.state.configuration.followZoom),console.log(`Switching map to match player ${s.name} ${r.name}`),a.commit(Pe.SET_CURRENT_MAP,{worldName:s.name,mapName:r.name}))}}});const so=S("data-v-37bfa7a5")(((e,t,a,o,n,s)=>{const r=f("MapLayer"),i=f("PlayersLayer"),l=f("MarkerSetLayer"),c=f("LogoControl"),d=f("CoordinatesControl"),p=f("LinkControl"),m=f("ClockControl"),h=f("ChatControl"),u=f("MapContextMenu");return E(),w(_,null,[b("div",O({class:"map",style:{backgroundColor:e.mapBackground}},e.$attrs,{"aria-label":e.mapTitle}),[e.leaflet?(E(),w(_,{key:0},[(E(!0),w(_,null,v(e.maps,(([t,a])=>(E(),w(r,{key:t,map:a,name:t,leaflet:e.leaflet},null,8,["map","name","leaflet"])))),128)),e.playerMarkersEnabled?(E(),w(i,{key:0,leaflet:e.leaflet},null,8,["leaflet"])):C("",!0),(E(!0),w(_,null,v(e.markerSets,(([t,a])=>(E(),w(l,{key:t,markerSet:a,leaflet:e.leaflet},null,8,["markerSet","leaflet"])))),128)),(E(!0),w(_,null,v(e.logoControls,(t=>(E(),w(c,{key:JSON.stringify(t),options:t,leaflet:e.leaflet},null,8,["options","leaflet"])))),128)),e.coordinatesControlEnabled?(E(),w(d,{key:1,leaflet:e.leaflet},null,8,["leaflet"])):C("",!0),e.linkControlEnabled?(E(),w(p,{key:2,leaflet:e.leaflet},null,8,["leaflet"])):C("",!0),e.clockControlEnabled?(E(),w(m,{key:3,leaflet:e.leaflet},null,8,["leaflet"])):C("",!0),e.chatBoxEnabled?(E(),w(h,{key:4,leaflet:e.leaflet},null,8,["leaflet"])):C("",!0)],64)):C("",!0)],16,["aria-label"]),e.leaflet?(E(),w(u,{key:0,leaflet:e.leaflet},null,8,["leaflet"])):C("",!0)],64)}));no.render=so,no.__scopeId="data-v-37bfa7a5";var ro=p({name:"PlayerListItem",props:{player:{type:Object,required:!0}},setup(e){const t=De(),a=m((()=>t.state.configuration.grayHiddenPlayers&&!e.player.hidden&&(!t.state.currentWorld||t.state.currentWorld.name!==e.player.location.world))),o=m((()=>e.player.hidden?t.state.messages.playersTitleHidden:a.value?t.state.messages.playersTitleOtherWorld:t.state.messages.playersTitle)),n=m((()=>t.state.followTarget?t.state.followTarget.account:void 0)),s=()=>{e.player.hidden||(t.commit(Pe.CLEAR_FOLLOW_TARGET,void 0),t.commit(Pe.SET_PAN_TARGET,e.player))},r=()=>t.commit(Pe.SET_FOLLOW_TARGET,e.player);let i=g($e);return y((()=>{t.state.components.playerMarkers&&t.state.components.playerMarkers.showSkinFaces&&_e(e.player,"16").then((e=>i.value=e.src)).catch((()=>{}))})),{image:i,title:o,otherWorld:a,followTarget:n,onInputClick:e=>{e.preventDefault(),e.shiftKey?r():s()},onLabelClick:e=>{e.shiftKey||2===e.detail?r():s()}}}});const io=S("data-v-5c979254")(((e,t,a,o,n,s)=>(E(),w(_,null,[M(b("input",{id:`player-${e.player.account}`,type:"radio",name:"player",value:e.player.account,"onUpdate:modelValue":t[1]||(t[1]=t=>e.followTarget=t),onClick:t[2]||(t[2]=U(((...t)=>e.onInputClick&&e.onInputClick(...t)),["prevent"]))},null,8,["id","value"]),[[I,e.followTarget]]),b("label",{for:`player-${e.player.account}`,class:{player:!0,"player--hidden":!!e.player.hidden,"player--other-world":e.otherWorld},title:e.title,onClick:t[3]||(t[3]=U(((...t)=>e.onLabelClick&&e.onLabelClick(...t)),["prevent"]))},[b("img",{width:"16",height:"16",class:"player__icon",src:e.image,alt:"","aria-hidden":"true"},null,8,["src"]),b("span",{class:"player__name",innerHTML:e.player.name},null,8,["innerHTML"])],10,["for","title"])],64))));ro.render=io,ro.__scopeId="data-v-5c979254";let lo=document.getElementById("icon--arrow"),co=document.getElementById("svg-sprite-component-wrap");if(co||(co=document.createElementNS("http://www.w3.org/2000/svg","svg"),co.id="svg-sprite-component-wrap",co.style.setProperty("display","none"),document.body.appendChild(co)),!lo){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");co.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 234.46 247.78"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--arrow"),e.innerHTML='\n    <path d="m19.626 58.589c-3.9626 0-7.9261 1.5194-10.963 4.5557l-1.1646 1.1646c-6.0727 6.0727-6.0727 15.852 0 21.925l98.421 98.421c3.1262 3.1262 7.2326 4.6291 11.312 4.5366 4.0782 0.0918 8.1837-1.411 11.309-4.5366l98.421-98.421c6.0727-6.0727 6.0727-15.852 0-21.925l-1.1646-1.1646c-6.0727-6.0727-15.85-6.0727-21.923 0l-86.643 86.645-86.645-86.645c-3.0364-3.0364-6.9975-4.5557-10.96-4.5557z"></path>\n'}var po=p({name:"CollapsibleSection",components:{SvgIcon:_a},props:{name:{type:String,required:!0}},computed:{title:()=>De().state.messages.toggleTitle,collapsed(){return De().state.ui.sidebar.collapsedSections.has(this.name)}},methods:{toggle(){De().commit(Pe.TOGGLE_SIDEBAR_SECTION_COLLAPSED_STATE,this.name)}}});const mo=S("data-v-8a91d536");x("data-v-8a91d536");const ho={class:"section__heading"};P();const uo=mo(((e,t,a,o,n,s)=>{const r=f("SvgIcon");return E(),w("section",{class:{sidebar__section:!0,"section--collapsible":!0,"section--collapsed":e.collapsed}},[b("h2",ho,[b("button",{id:`${e.name}-heading`,type:"button",onClick:t[1]||(t[1]=U(((...t)=>e.toggle&&e.toggle(...t)),["prevent"])),title:e.title,"aria-expanded":!e.collapsed,"aria-controls":`${e.name}-content`},[b("span",null,[N(e.$slots,"heading",{},void 0,!0)]),b(r,{name:"arrow"})],8,["id","title","aria-expanded","aria-controls"])]),b("div",{id:`${e.name}-content`,"aria-hidden":e.collapsed},[N(e.$slots,"default",{},void 0,!0)],8,["id","aria-hidden"])],2)}));po.render=uo,po.__scopeId="data-v-8a91d536";var go=p({name:"RadioList",setup(){},methods:{onKeydown(e){da(e,Array.from(e.currentTarget.elements))}}});go.render=function(e,t,a,o,n,s){return E(),w("fieldset",{class:"menu",role:"radiogroup",onKeydown:t[1]||(t[1]=(...t)=>e.onKeydown&&e.onKeydown(...t))},[N(e.$slots,"default")],32)};var yo=p({components:{RadioList:go,CollapsibleSection:po,PlayerListItem:ro},setup(){const e=De(),t=m((()=>e.state.messages.playersHeading)),a=m((()=>e.state.messages.playersSkeleton)),o=m((()=>e.state.messages.playersSearchSkeleton)),n=m((()=>e.state.messages.playersSearchPlaceholder)),s=m((()=>e.state.ui.playersSearch)),r=g(""),i=m((()=>e.state.sortedPlayers)),l=m((()=>{const t=r.value.toLowerCase();return t?e.state.sortedPlayers.filter((e=>e.account.toLowerCase().indexOf(t)>-1)):e.state.sortedPlayers})),c=m((()=>e.state.configuration.maxPlayers));return{messageHeading:t,messageSkeletonPlayers:a,messageSkeletonPlayersSearch:o,messagePlayersSearchPlaceholder:n,searchEnabled:s,searchQuery:r,players:i,filteredPlayers:l,maxPlayers:c,onKeydown:e=>{e.stopImmediatePropagation()}}}});const wo=S("data-v-c6d6cef2");x("data-v-c6d6cef2");const vo={class:"section__content"},_o={key:2,class:"section__skeleton"},fo={key:3,class:"section__skeleton"};P();const Eo=wo(((e,t,a,o,n,s)=>{const r=f("PlayerListItem"),i=f("RadioList"),l=f("CollapsibleSection");return E(),w(l,{name:"players",class:"players"},{heading:wo((()=>[z(A(e.messageHeading)+" ["+A(e.players.length)+"/"+A(e.maxPlayers)+"]",1)])),default:wo((()=>[b("div",vo,[e.players&&e.searchEnabled?M((E(),w("input",{key:0,id:"players__search",type:"text",name:"search","onUpdate:modelValue":t[1]||(t[1]=t=>e.searchQuery=t),placeholder:e.messagePlayersSearchPlaceholder,onKeydown:t[2]||(t[2]=(...t)=>e.onKeydown&&e.onKeydown(...t))},null,40,["placeholder"])),[[D,e.searchQuery]]):C("",!0),e.filteredPlayers.length?(E(),w(i,{key:1,"aria-labelledby":"players-heading"},{default:wo((()=>[(E(!0),w(_,null,v(e.filteredPlayers,(e=>(E(),w(r,{key:e.account,player:e},null,8,["player"])))),128))])),_:1})):e.searchQuery?(E(),w("div",_o,A(e.messageSkeletonPlayersSearch),1)):(E(),w("div",fo,A(e.messageSkeletonPlayers),1))])])),_:1})}));yo.render=Eo,yo.__scopeId="data-v-c6d6cef2";var bo=p({name:"WorldList",components:{RadioList:go,CollapsibleSection:po,WorldListItem:Za},props:{prefix:{type:String,default:"map"}},computed:{heading:()=>De().state.messages.worldsHeading,skeletonWorlds:()=>De().state.messages.worldsSkeleton,worlds:()=>De().state.worlds,currentServer(){const e=De();return e.state.currentServer?e.state.currentServer.id:void 0}}});const So={key:1,class:"section__content section__skeleton"};bo.render=function(e,t,a,o,n,s){const r=f("WorldListItem"),i=f("RadioList"),l=f("CollapsibleSection");return E(),w(l,{name:"maps"},{heading:H((()=>[z(A(e.heading),1)])),default:H((()=>[e.worlds.size?(E(),w(i,{key:0,class:"section__content","aria-labelledby":"maps-heading"},{default:H((()=>[(E(!0),w(_,null,v(e.worlds,(([t,a])=>(E(),w(r,{world:a,key:`${e.prefix}_${e.currentServer}_${t}`},null,8,["world"])))),128))])),_:1})):(E(),w("div",So,A(e.skeletonWorlds),1))])),_:1})};var Lo=p({name:"ServerListItem",props:{server:{type:Object,required:!0}},computed:{currentServer:{get(){const e=De();return e.state.currentServer?e.state.currentServer.id:void 0},set(e){De().commit(Pe.SET_CURRENT_SERVER,e)}}}});Lo.render=function(e,t,a,o,n,s){return E(),w(_,null,[M(b("input",{id:`server-${e.server.id}`,type:"radio",name:"server",value:e.server.id,"onUpdate:modelValue":t[1]||(t[1]=t=>e.currentServer=t)},null,8,["id","value"]),[[I,e.currentServer]]),b("label",{for:`server-${e.server.id}`},A(e.server.label||e.server.id),9,["for"])],64)};var ko=p({name:"ServerList",components:{RadioList:go,CollapsibleSection:po,ServerListItem:Lo},computed:{heading:()=>De().state.messages.serversHeading,servers:()=>De().state.servers}});ko.render=function(e,t,a,o,n,s){const r=f("ServerListItem"),i=f("RadioList"),l=f("CollapsibleSection");return e.servers.size>1?(E(),w(l,{key:0,name:"servers"},{heading:H((()=>[z(A(e.heading),1)])),default:H((()=>[b(i,{class:"section__content","aria-labelledby":"servers-heading"},{default:H((()=>[(E(!0),w(_,null,v(e.servers,(([e,t])=>(E(),w(r,{server:t,key:e},null,8,["server"])))),128))])),_:1})])),_:1})):C("",!0)};var To=p({name:"FollowTarget",props:{target:{type:Object,required:!0}},setup(e){const t=De(),a=g($e),o=g(e.target.account),n=m((()=>t.state.messages.followingHeading)),s=m((()=>t.state.messages.followingUnfollow)),r=m((()=>t.state.messages.followingTitleUnfollow)),i=m((()=>t.state.messages.followingHidden)),l=async()=>{if(a.value=$e,t.state.components.playerMarkers&&t.state.components.playerMarkers.showSkinFaces)try{const t=await _e(e.target,"16");a.value=t.src}catch(o){}};return h(o,(()=>l())),y((()=>l())),{image:a,unfollow:()=>{De().commit(Pe.CLEAR_FOLLOW_TARGET,void 0)},heading:n,messageUnfollow:s,messageUnfollowTitle:r,messageHidden:i}}});const Ao=S("data-v-5db980ea");x("data-v-5db980ea");const Co={class:"sidebar__section following"},xo={class:"target__info"};P();const Po=Ao(((e,t,a,o,n,s)=>(E(),w("section",Co,[b("h2",null,A(e.heading),1),b("div",{class:{following__target:!0,"following__target--hidden":e.target.hidden}},[b("img",{width:"32",height:"32",class:"target__icon",src:e.image,alt:""},null,8,["src"]),b("span",xo,[b("span",{class:"target__name",innerHTML:e.target.name},null,8,["innerHTML"]),M(b("span",{class:"target__status"},A(e.messageHidden),513),[[B,e.target.hidden]])]),b("button",{class:"target__unfollow",type:"button",title:e.messageUnfollowTitle,onClick:t[1]||(t[1]=U(((...t)=>e.unfollow&&e.unfollow(...t)),["prevent"]))},A(e.messageUnfollow),9,["title"])],2)]))));To.render=Po,To.__scopeId="data-v-5db980ea";let Mo=document.getElementById("icon--players"),Io=document.getElementById("svg-sprite-component-wrap");if(Io||(Io=document.createElementNS("http://www.w3.org/2000/svg","svg"),Io.id="svg-sprite-component-wrap",Io.style.setProperty("display","none"),document.body.appendChild(Io)),!Mo){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Io.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 258.51 270.92"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--players"),e.innerHTML='\n  <path d="m206.11 77.176c0 42.623-34.327 77.176-76.671 77.176-42.344 0-76.671-34.553-76.671-77.176 0-42.623 34.327-77.176 76.671-77.176 42.344-1.1118e-6 76.671 34.553 76.671 77.176"></path>\n  <path d="m129.44-0.375c-42.548 1.68e-6 -77.045 34.726-77.045 77.551-2e-6 42.824 34.497 77.551 77.045 77.551 42.548 0 77.047-34.726 77.047-77.551s-34.499-77.551-77.047-77.551zm0 0.75c42.14-1.11e-6 76.297 34.379 76.297 76.801 0 42.422-34.157 76.801-76.297 76.801-42.14 0-76.295-34.379-76.295-76.801 0-42.422 34.155-76.801 76.295-76.801z"></path>\n <path d="m74.521 270.79c-27.929-0.10959-53.106-0.26103-55.95-0.33654-9.7498-0.25887-16.007-1.9738-17.803-4.879-1.5443-2.4987-0.64547-19.45 1.663-31.363 4.1709-21.524 13.349-42.094 25.629-57.437 4.4942-5.6155 14.041-14.89 21.441-20.829 6.7106-5.3859 13.992-10.117 17.875-11.615 4.9705-1.9168 5.744-1.6607 17.486 5.7908 4.3324 2.7493 10.501 5.881 14.437 7.3297 5.6648 2.0848 15.866 4.6674 21.924 5.5504 3.2848 0.47876 12.085 0.55685 15.26 0.1354 6.999-0.92916 18.207-3.8064 24.183-6.208 5.3409-2.1465 9.3566-4.3063 16.075-8.6461 8.9918-5.808 10.51-6.06 16.918-2.8078 11.741 5.9589 29.819 21.683 39.11 34.018 10.378 13.777 19.152 33.714 22.977 52.208 1.8842 9.1098 2.5473 15.184 2.7057 24.784 0.11877 7.1982 0.0906 7.8959-0.35334 8.7433-1.357 2.5905-5.9008 4.2825-13.475 5.0179-1.8793 0.18246-19.752 0.33241-50.249 0.42157-26.033 0.0761-52.224 0.17943-58.204 0.22957-5.9795 0.0502-33.722 2e-3 -61.651-0.10807z" stroke-width=".26516"></path>\n'}let zo=document.getElementById("icon--maps"),Uo=document.getElementById("svg-sprite-component-wrap");if(Uo||(Uo=document.createElementNS("http://www.w3.org/2000/svg","svg"),Uo.id="svg-sprite-component-wrap",Uo.style.setProperty("display","none"),document.body.appendChild(Uo)),!zo){let e=document.createElementNS("http://www.w3.org/2000/svg","symbol");Uo.appendChild(e),e.setAttribute("version","1.0"),e.setAttribute("viewBox","0 0 270.06 267.09"),e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("id","icon--maps"),e.innerHTML='\n <g transform="translate(-.49951 -4.5791)" stroke-width="0">\n  <path transform="scale(.75)" d="m0.66602 9.7227v298.96c0.046934 2.8741 0.25213 2.6741 2.535 3.6641l110.65 47.987c3.8989 1.918 3.6147 1.7537 3.6147-2.3528v-297.68c-0.0605-3.8542 0.32855-4.1331-2.8087-5.4937l-110.14-47.768c-2.988-1.1299-3.8517-1.741-3.8517 2.6812zm65.271 177.53c19.088 0 34.562 15.922 34.562 35.562 2.2e-4 6.4076-1.6821 12.696-4.8691 18.201l-25.939 55.648c-1.8045 3.8714-3.0529 3.8185-5.0156-0.0742l-28.344-55.426c-0.68826-1.1762-1.3097-2.3924-1.8613-3.6426l-0.21875-0.42578 0.03711 8e-3c-1.9214-4.5044-2.9137-9.3701-2.9141-14.289 0-19.641 15.474-35.562 34.562-35.562zm0 20.625c-8.0178-6e-5 -14.518 6.6877-14.518 14.938s6.4998 14.938 14.518 14.938c8.0178 6e-5 14.518-6.6877 14.518-14.938s-6.4998-14.938-14.518-14.938z"></path>\n  <path transform="scale(.75)" d="m236.43 8.5914-86.609 38.801c-9.3133 4.1592-8.1971 3.54-8.1971 14.952v297.52c-0.0201 2.6943-0.30938 2.8029 2.1555 1.7437l97.364-41.839c2.3162-0.98051 2.0784-1.6006 2.0784-3.5142v-303.35c0.15129-9.1976 0.75524-7.3665-6.7914-4.3133zm-44.714 54.614c19.088 0 34.562 15.922 34.562 35.562-1.9e-4 6.4108-1.6846 12.702-4.875 18.209l-25.934 55.643c-1.8045 3.8714-3.0529 3.8185-5.0156-0.0742l-28.357-55.453c-0.6778-1.1591-1.2908-2.357-1.8359-3.5879l-0.23243-0.45508 0.0391 8e-3c-1.9214-4.5044-2.9136-9.3699-2.9141-14.289 0-19.641 15.474-35.562 34.562-35.562zm0 20.625c-8.0178-6e-5 -14.518 6.6877-14.518 14.938 0 8.2498 6.4998 14.938 14.518 14.938 8.0178 7e-5 14.518-6.6877 14.518-14.938 0-8.2498-6.4998-14.938-14.518-14.938z"></path>\n  <path d="m267.64 36.871-59.959-29.533c-6.555-3.2203-6.5798-4.161-6.4472 2.3579v225.51c-0.0251 3.9614 0.03 3.9662 3.1935 5.4609l62.579 29.567c3.8853 1.693 3.4322 1.9822 3.5316-1.5506v-224.87c0.0476-4.7459 0.23478-5.4796-2.8976-6.934z"></path>\n </g>\n'}var Ro=p({components:{ServerList:ko,SvgIcon:_a,PlayerList:yo,FollowTarget:To,WorldList:bo},setup(){const e=De(),t=g(null),a=m((()=>e.state.ui.visibleElements)),o=m((()=>e.state.ui.previouslyVisibleElements)),n=m((()=>e.state.ui.smallScreen)),s=m((()=>e.state.maps.size)),r=m((()=>e.state.servers.size)),i=m((()=>e.state.followTarget)),l=m((()=>e.state.messages.worldsHeading)),c=m((()=>e.state.messages.playersHeading)),d=m((()=>!!e.state.components.playerMarkers)),p=m((()=>a.value.has("players"))),u=m((()=>a.value.has("maps"))),y=m((()=>!n.value&&i.value||n.value&&p.value));return h(p,(e=>e&&T((()=>Ce("#players-heading"))))),h(u,(e=>e&&T((()=>Ce(".section__heading button"))))),{sidebar:t,mapCount:s,serverCount:r,following:i,messageWorlds:l,messagePlayers:c,previouslyVisible:o,playersVisible:p,mapsVisible:u,followVisible:y,playerMakersEnabled:d,handleSidebarKeydown:e=>{if(!e.target||!e.target.matches(".section__heading button"))return;const a=Array.from(t.value.querySelectorAll(".section__heading button"));da(e,a)},handleMapsKeydown:t=>{"ArrowDown"===t.key&&e.commit(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"maps",state:!0})},handlePlayersKeydown:t=>{"ArrowDown"===t.key&&e.commit(Pe.SET_UI_ELEMENT_VISIBILITY,{element:"players",state:!0})},togglePlayers:()=>e.commit(Pe.TOGGLE_UI_ELEMENT_VISIBILITY,"players"),toggleMaps:()=>e.commit(Pe.TOGGLE_UI_ELEMENT_VISIBILITY,"maps")}}});const Oo={class:"sidebar",role:"none",ref:"sidebar"},No={class:"sidebar__buttons"};Ro.render=function(e,t,a,o,n,s){const r=f("SvgIcon"),i=f("ServerList"),l=f("WorldList"),c=f("PlayerList"),d=f("FollowTarget");return E(),w("section",Oo,[b("header",No,[e.mapCount>1?(E(),w("button",{key:0,class:{"button--maps":!0},onClick:t[1]||(t[1]=(...t)=>e.toggleMaps&&e.toggleMaps(...t)),title:e.messageWorlds,"aria-label":e.messageWorlds,"aria-expanded":e.mapsVisible,onKeydown:t[2]||(t[2]=(...t)=>e.handleMapsKeydown&&e.handleMapsKeydown(...t))},[b(r,{name:"maps"})],40,["title","aria-label","aria-expanded"])):C("",!0),e.playerMakersEnabled?(E(),w("button",{key:1,class:{"button--players":!0},onClick:t[3]||(t[3]=(...t)=>e.togglePlayers&&e.togglePlayers(...t)),title:e.messagePlayers,"aria-label":e.messagePlayers,"aria-expanded":e.playersVisible,onKeydown:t[4]||(t[4]=(...t)=>e.handlePlayersKeydown&&e.handlePlayersKeydown(...t))},[b(r,{name:"players"})],40,["title","aria-label","aria-expanded"])):C("",!0)]),b("div",{class:"sidebar__content",onKeydown:t[5]||(t[5]=(...t)=>e.handleSidebarKeydown&&e.handleSidebarKeydown(...t))},[e.serverCount>1?M((E(),w(i,{key:0},null,512)),[[B,e.mapsVisible]]):C("",!0),e.mapCount>1?M((E(),w(l,{key:1},null,512)),[[B,e.mapsVisible]]):C("",!0),e.playerMakersEnabled&&e.previouslyVisible.has("players")?M((E(),w(c,{key:2,id:"players"},null,512)),[[B,e.playersVisible]]):C("",!0),e.following?M((E(),w(d,{key:3,target:e.following},null,8,["target"])),[[B,e.followVisible]]):C("",!0)],32)],512)};var Do=p({props:{message:{type:Object,required:!0}},setup(e){const t=De();let a=g($e),o=m((()=>{var a;return(null==(a=t.state.components.chatBox)?void 0:a.showPlayerFaces)&&e.message.playerAccount})),n=m((()=>e.message.playerName&&"chat"===e.message.type)),s=m((()=>{switch(e.message.type){case"chat":return e.message.message;case"playerjoin":return e.message.playerName?t.state.messages.chatPlayerJoin.replace("%playername%",e.message.playerName):t.state.messages.chatAnonymousJoin;case"playerleave":return e.message.playerName?t.state.messages.chatPlayerQuit.replace("%playername%",e.message.playerName):t.state.messages.chatAnonymousQuit}}));return y((()=>{o.value&&_e(e.message.playerAccount,"16").then((e=>a.value=e.src)).catch((()=>{}))})),{image:a,showFace:o,showSender:n,messageContent:s}}});Do.render=function(e,t,a,o,n,s){return E(),w("li",{class:`message message--${e.message.type}`},[e.showFace?(E(),w("img",{key:0,width:"16",height:"16",class:"message__face",src:e.image,alt:""},null,8,["src"])):C("",!0),e.showSender?(E(),w("span",{key:1,class:"message__sender",innerHTML:e.message.playerName},null,8,["innerHTML"])):C("",!0),b("span",{class:"message__content",innerHTML:e.messageContent},null,8,["innerHTML"])],2)};var Ho=p({components:{ChatMessage:Do},setup(){const e=De(),t=m((()=>e.state.components.chatBox)),a=m((()=>e.state.ui.visibleElements.has("chat"))),o=m((()=>e.state.components.chatSending&&e.state.components.chatSending.loginRequired&&!e.state.loggedIn)),n=m((()=>e.state.components.chatSending&&!o.value)),s=m((()=>{var t;return null==(t=e.state.components.chatSending)?void 0:t.maxLength})),r=g(null),i=g(""),l=g(!1),c=g(null),d=m((()=>t.value.messageHistory?e.state.chat.messages.slice(0,t.value.messageHistory):e.state.chat.messages)),p=m((()=>e.state.messages.chatSend)),u=m((()=>e.state.messages.chatPlaceholder)),y=m((()=>e.state.messages.chatNoMessages)),w=m((()=>e.state.messages.chatLogin.replace("{{link}}",`<a href="login.html">${e.state.messages.chatLoginLink}</a>`)));return h(a,(e=>{e&&n.value&&requestAnimationFrame((()=>r.value.focus()))})),{chatInput:r,enteredMessage:i,sendMessage:async()=>{const t=i.value.trim().substring(0,s.value);if(t){l.value=!0,c.value=null;try{await e.dispatch(Re.SEND_CHAT_MESSAGE,t),i.value="",c.value=null}catch(a){c.value=a instanceof G?a.message:e.state.messages.chatErrorUnknown}finally{l.value=!1,requestAnimationFrame((()=>r.value.focus()))}}},chatMessages:d,loginRequired:o,sendingEnabled:n,sendingMessage:l,sendingError:c,maxMessageLength:s,messageLogin:w,messageSend:p,messageNoMessages:y,messagePlaceholder:u}}});const Bo={class:"chat"},$o={class:"chat__messages",role:"log","aria-live":"polite","aria-relevant":"additions"},jo={key:0,class:"message message--skeleton",role:"none"},Zo={key:0,role:"alert",class:"chat__error"};Ho.render=function(e,t,a,o,n,s){const r=f("ChatMessage");return E(),w("section",Bo,[b("ul",$o,[(E(!0),w(_,null,v(e.chatMessages,(e=>(E(),w(r,{key:e.timestamp,message:e},null,8,["message"])))),128)),e.chatMessages.length?C("",!0):(E(),w("li",jo,A(e.messageNoMessages),1))]),e.sendingEnabled?(E(),w("form",{key:0,class:"chat__form",onSubmit:t[2]||(t[2]=U(((...t)=>e.sendMessage&&e.sendMessage(...t)),["prevent"]))},[e.sendingError?(E(),w("div",Zo,A(e.sendingError),1)):C("",!0),M(b("input",{ref:"chatInput","onUpdate:modelValue":t[1]||(t[1]=t=>e.enteredMessage=t),class:"chat__input",type:"text",maxlength:e.maxMessageLength,placeholder:e.messagePlaceholder,disabled:e.sendingMessage},null,8,["maxlength","placeholder","disabled"]),[[D,e.enteredMessage]]),b("button",{class:"chat__send",disabled:!e.enteredMessage||e.sendingMessage},A(e.messageSend),9,["disabled"])],32)):C("",!0),e.loginRequired?(E(),w("div",{key:1,class:"chat__login",innerHTML:e.messageLogin},null,8,["innerHTML"])):C("",!0)])};const Wo=document.getElementById("app"),Go=document.getElementById("splash"),Fo=document.getElementById("splash__spinner"),qo=document.getElementById("splash__error"),Vo=document.getElementById("splash__error-message"),Ko=document.getElementById("splash__error-retry"),Yo=function(){Go&&Wo&&(Go.hidden=!1,Wo.setAttribute("aria-hidden","true"),requestAnimationFrame((function(){Go.style.opacity="1"})))},Qo=(e,t,a)=>{qo&&qo.setAttribute("aria-hidden","false"),Vo&&Vo.innerText!==e&&(Vo.innerText=e||"Unknown error"),Fo&&t&&(Fo.style.visibility="hidden"),Ko&&(t?Ko.hidden=!0:a&&(Ko.hidden=!1,Ko.textContent=`Retrying... (${a.toString()})`))};var Jo=p({name:"App",components:{Map:no,Sidebar:Ro,ChatBox:Ho},setup(){const e=De(),t=m((()=>e.state.configuration.updateInterval)),a=m((()=>e.state.configuration.title)),o=m((()=>e.getters.url)),n=m((()=>e.state.currentServer)),s=m((()=>e.state.configurationHash)),r=m((()=>e.state.components.chatBox)),i=m((()=>e.state.ui.visibleElements.has("chat"))),l=g(!1),c=g(0),d=g(0),p=async()=>{try{await e.dispatch(Re.LOAD_CONFIGURATION,void 0),w(),requestAnimationFrame((()=>{Go&&Wo&&requestAnimationFrame((()=>{Go.style.opacity="0",Wo.removeAttribute("aria-hidden"),"0"===window.getComputedStyle(Go).opacity&&(Go.hidden=!0)}));const e=document.getElementById("#app");e&&e.focus()}))}catch(t){if(t instanceof DOMException&&"AbortError"===t.name)return;const a=`Failed to load server configuration for '${e.state.currentServer.id}'`;console.error(`${a}:`,t),Qo(`${a}\n${t}`,!1,++d.value),setTimeout((()=>p()),1e3)}},w=()=>{l.value=!0,v()},v=async()=>{try{await e.dispatch(Re.GET_UPDATE,void 0)}finally{l.value&&(c.value&&clearTimeout(c.value),c.value=setTimeout((()=>v()),t.value))}},_=()=>{l.value=!1,c.value&&clearTimeout(c.value),c.value=0},f=()=>{e.commit(Pe.SET_SMALL_SCREEN,window.innerWidth<480||window.innerHeight<500)},E=t=>{if(!t.ctrlKey||!t.shiftKey)return;let a;switch(t.key){case"M":a="maps";break;case"C":a="chat";break;case"P":a="players";break;case"L":a="layers";break;default:return}t.preventDefault(),e.commit(Pe.TOGGLE_UI_ELEMENT_VISIBILITY,a)},b=()=>{const t=Se();t&&e.commit(Pe.SET_PARSED_URL,t)};return h(a,(e=>document.title=e)),h(o,(e=>window.history.replaceState({},"",e))),h(n,(t=>{Yo(),_(),t&&(e.commit(Pe.CLEAR_PLAYERS,void 0),e.commit(Pe.CLEAR_CURRENT_MAP,void 0),e.commit(Pe.CLEAR_PARSED_URL,void 0),e.commit(Pe.CLEAR_WORLDS,void 0),e.commit(Pe.CLEAR_MARKER_SETS,void 0),window.history.replaceState({},"",t.id),p())}),{deep:!0}),h(s,((t,a)=>{t&&a&&(Yo(),_(),e.commit(Pe.CLEAR_PARSED_URL,void 0),p())})),y((()=>p())),$((()=>_())),(()=>{const t=Se();if(t){if(t.legacy){const e=new URL(window.location.href);e.searchParams.delete("worldname"),e.searchParams.delete("mapname"),e.searchParams.delete("x"),e.searchParams.delete("y"),e.searchParams.delete("z"),e.searchParams.delete("zoom"),history.replaceState({},"",e.toString())}e.commit(Pe.SET_PARSED_URL,t)}})(),f(),y((()=>{window.addEventListener("resize",f),window.addEventListener("keydown",E),window.addEventListener("hashchange",b)})),u((()=>{window.addEventListener("resize",f),window.addEventListener("keydown",E),window.addEventListener("hashchange",b)})),{chatBoxEnabled:r,chatVisible:i}}});Jo.render=function(e,t,a,o,n,s){const r=f("Map"),i=f("ChatBox"),l=f("Sidebar"),c=f("notifications");return E(),w(_,null,[b(r),e.chatBoxEnabled?M((E(),w(i,{key:0},null,512)),[[B,e.chatBoxEnabled&&e.chatVisible]]):C("",!0),b(l),b(c,{position:"bottom center",speed:250,max:3,ignoreDuplicates:!0,classes:"notification"})],64)};class Xo extends Error{constructor(e){super(e),this.name=""}}const en=e=>{var t;if(!e)throw new Xo("Configuration object is missing");return void 0!==e.servers?(e=>{const t="\nCheck your server configuration in index.html is correct.",a=new Map;if(!Object.keys(e).length)throw new Xo(`No servers defined. ${t}`);for(const o in e){if(!Object.hasOwnProperty.call(e,o))continue;const n=e[o];if(!n||n.constructor!==Object||!Object.keys(n).length)throw new Xo(`Server '${o}': Configuration missing. ${t}`);switch(n.id=o,n.type=n.type||"dynmap",n.type){case"dynmap":if(!n.dynmap||n.dynmap.constructor!==Object)throw new Xo(`Server '${o}': Dynmap configuration object missing. ${t}`);if(!n.dynmap.configuration)throw new Xo(`Server '${o}': Dynmap configuration URL missing. ${t}`);if(!n.dynmap.update)throw new Xo(`Server '${o}': Dynmap update URL missing. ${t}`);if(!n.dynmap.markers)throw new Xo(`Server '${o}': Dynmap markers URL missing. ${t}`);if(!n.dynmap.tiles)throw new Xo(`Server '${o}': Dynmap tiles URL missing. ${t}`);if(!n.dynmap.sendmessage)throw new Xo(`Server '${o}': Dynmap sendmessage URL missing. ${t}`);break;case"pl3xmap":case"plexmap":if(!n.plexmap||n.plexmap.constructor!==Object)throw new Xo(`Server '${o}': Pl3xmap configuration object missing. ${t}`)}a.set(o,n)}return a})(e.servers):(e=>{const t="\nCheck your standalone/config.js file exists and is being loaded correctly.";if(!e)throw new Xo(`Dynmap configuration is missing. ${t}`);if(!e.configuration)throw new Xo(`Dynmap configuration URL is missing. ${t}`);if(!e.update)throw new Xo(`Dynmap update URL is missing. ${t}`);if(!e.markers)throw new Xo(`Dynmap markers URL is missing. ${t}`);if(!e.tiles)throw new Xo(`Dynmap tiles URL is missing. ${t}`);if(!e.sendmessage)throw new Xo(`Dynmap sendmessage URL is missing. ${t}`);const a=new Map;return a.set("dynmap",{id:"dynmap",label:"dynmap",type:"dynmap",dynmap:e}),a})((null==(t=window.config)?void 0:t.url)||null)},tn=document.getElementById("splash");tn&&tn.addEventListener("transitionend",(e=>{e.target===tn&&"0"===tn.style.opacity&&(tn.hidden=!0)})),console.info(`LiveAtlas version ${Ne.state.version} - https://github.com/JLyne/LiveAtlas`),Ne.subscribe(((e,t)=>{"toggleSidebarSectionCollapsedState"!==e.type&&"setSidebarSectionCollapsedState"!==e.type||localStorage.setItem("collapsedSections",JSON.stringify(Array.from(t.ui.sidebar.collapsedSections)))}));try{const e=window.liveAtlasConfig;if(e.servers=en(e),Ne.commit(Pe.INIT,e),Ne.state.servers.size>1){const e=window.location.pathname.split("/").pop(),t=e&&Ne.state.servers.has(e)?e:Ne.state.servers.keys().next().value;t!==e&&window.history.replaceState({},"",t+window.location.hash),Ne.commit(Pe.SET_CURRENT_SERVER,t)}else Ne.commit(Pe.SET_CURRENT_SERVER,Ne.state.servers.keys().next().value);j(Jo).use(Ne).use(Z).use(W).mount("#app")}catch(an){console.error("LiveAtlas configuration is invalid: ",an),Qo("LiveAtlas configuration is invalid\n"+an,!0)}
